!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){!function(t,r){"object"==typeof n?e.exports=r():"function"==typeof define&&define.amd?define(r):t.crel=r()}(this,function(){function t(){var o,i=window.document,a=arguments,s=a[0],c=a[1],u=2,f=a.length,p=t.attrMap;if(s=e(s)?s:i.createElement(s),1===f)return s;if(("object"!=typeof c||e(c)||n(c))&&(--u,c=null),f-u===1&&"string"==typeof a[u]&&void 0!==s.textContent)s.textContent=a[u];else for(;f>u;++u)if(o=a[u],null!=o)if(n(o))for(var l=0;l<o.length;++l)r(s,o[l]);else r(s,o);for(var h in c)if(p[h]){var d=t.attrMap[h];"function"==typeof d?d(s,c[h]):s.setAttribute(d,c[h])}else s.setAttribute(h,c[h]);return s}var e="object"==typeof Node?function(t){return t instanceof Node}:function(t){return t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},n=function(t){return t instanceof Array},r=function(t,n){e(n)||(n=document.createTextNode(n)),t.appendChild(n)};return t.attrMap={},t.isNode=e,t})},{}],2:[function(t,e){function n(t,e){for(var n=0;n<t.length;n++)if(e===t[n])return!0}function r(t,e){if(t=getTargets(t),null==e)return t;if(m(t)){for(var r=[],o=0;o<t.length;o++)for(var i=g.find(t[o],e),a=0;a<i.length;a++)n(r,i[a])||r.push(i[a]);return r}return t?t.querySelectorAll(e):[]}function o(t,e){if(t=getTarget(t),null==e)return t;if(m(t)){for(var n,r=0;r<t.length&&!(n=o(t[r],e));r++);return n}return t?t.querySelector(e):null}function i(t,e){for(t=getTarget(t),m(t)&&(t=t[0]);t&&t.ownerDocument&&!a(t,e);)t=t.parentNode;return t===g.document&&t!==e?null:t}function a(t,e){return t=getTarget(t),m(t)&&(t=t[0]),t.ownerDocument&&"string"==typeof e?t===e||y.indexOf.call(r(t.parentNode,e),t)>=0:t===e}function s(t,e){if(t=getTargets(t),m(t)){for(var n=0;n<t.length;n++)s(t[n],e);return this}if(!e)return this;for(var e=e.split(space),r=t.classList?null:t.className.split(space),n=0;n<e.length;n++){var o=e[n];o&&o!==space&&(t.classList?t.classList.add(o):!r.indexOf(o)>=0&&r.push(o))}return t.classList||(t.className=r.join(space)),this}function c(t,e){if(t=getTargets(t),m(t)){for(var n=0;n<t.length;n++)c(t[n],e);return this}if(!e)return this;for(var e=e.split(space),r=t.classList?null:t.className.split(space),n=0;n<e.length;n++){var o=e[n];if(o&&o!==space)if(t.classList)t.classList.remove(o);else{var i=r.indexOf(o);i>=0&&r.splice(i,1)}}return t.classList||(t.className=r.join(space)),this}function u(t){var e=getTarget(t.target);e?e.addEventListener(t.event,t.callback,!1):console.warn("No elements matched the selector, so no events were bound.")}function f(t,e,n,r){if(r=getTargets(r),!r&&(e=getTargets(e),m(e))){for(var o=[],a=0;a<e.length;a++)o.push(f(t,e[a],n,r));return function(){for(;o.length;)o.pop()}}if(m(r)){for(var o=[],a=0;a<r.length;a++)o.push(f(t,e,n,r[a]));return function(){for(;o.length;)o.pop()}}var s=[];"string"==typeof t&&(t=t.split(space));for(var a=0;a<t.length;a++){var c={};r?(r===!0&&(r=g.document),c.target=r,c.callback=function(t){var r=i(t.target,e);r&&n(t,r)}):(c.target=e,c.callback=n),c.event=t[a],u(c),s.push(c)}return function(){for(;s.length;){var t=s.pop();getTarget(t.target).removeEventListener(t.event,t.callback)}}}function p(t,e,n,o){if(m(e)){for(var i=0;i<e.length;i++)p(t,e[i],n,o);return this}if(o instanceof Array){for(var i=0;i<o.length;i++)p(t,e,n,o[i]);return this}"string"==typeof t&&(t=t.split(space)),"function"!=typeof n&&(o=n,n=null),o=o?getTarget(o):g.document;for(var a="string"==typeof e?r(e,o):[e],s=0;s<a.length;s++)for(var c=a[s],i=0;i<t.length;i++)c.removeEventListener(t[i],n);return this}function l(t,e){var t=getTarget(t),e=getTarget(e);if(m(t)&&(t=t[0]),m(e))for(var n=0;n<e.length;n++)l(t,e[n]);else t.appendChild(e)}function h(t,e){var t=getTarget(t),e=getTarget(e);if(m(t)&&(t=t[0]),m(e))for(var n=e.length-1;n;n--)h(t,e[n]);else t.insertBefore(e,t.firstChild)}function d(t){var t=getTarget(t);if(t){if(m(t)){for(var e=-1;t[e++]&&d(t[e]););return t.length>=e}for(;t.parentNode&&"none"!==t.style.display;)t=t.parentNode;return t===g.document}}function v(t,e){"function"!=typeof t||e||(e=t),g.document.body?e():g.on("load",window,function(){e()})}var g={document:"undefined"!=typeof document?document:null,setDocument:function(t){this.document=t}},y=[],m=t("./isList");getTargets=t("./getTargets")(g.document),getTarget=t("./getTarget")(g.document),space=" ",g.find=r,g.findOne=o,g.closest=i,g.is=a,g.addClass=s,g.removeClass=c,g.off=p,g.on=f,g.append=l,g.prepend=h,g.isVisible=d,g.ready=v,e.exports=g},{"./getTarget":4,"./getTargets":5,"./isList":6}],3:[function(t,e){function n(t){this.push.apply(this,t)}function r(t){var e=a(t);return i(e)||(e=e?[e]:[]),new n(e)}var o=t("./doc"),i=t("./isList"),a=t("./getTargets")(o.document),s=[];n.prototype=s,s.constructor=n;for(var c in o)"function"==typeof o[c]&&(r[c]=o[c],s[c]=function(t){return function(e,n,a,s,c,u){var f=o[t](this,e,n,a,s,c,u);return f!==o&&i(f)?r(f):f}}(c));s.on=function(t,e,n){var r=this;return"function"==typeof e&&(n=e,e=this,r=null),o.on(t,e,n,r),this},s.off=function(t,e,n){var r=this;return"function"==typeof e&&(n=e,e=this,r=null),o.off(t,e,n,r),this},e.exports=r},{"./doc":2,"./getTargets":5,"./isList":6}],4:[function(t,e){var n=/^#\w+$/;e.exports=function(t){return function(e){return"string"==typeof e?n.exec(e)?t.getElementById(e.slice(1)):t.querySelector(e):e}}},{}],5:[function(t,e){var n=/^\.\w+$/,r=/^#\w+$/,o=/^\w+$/;e.exports=function(t){return function(e){return"string"==typeof e?r.exec(e)?[t.getElementById(e.slice(1))]:o.exec(e)?t.getElementsByTagName(e):n.exec(e)?t.getElementsByClassName(e.slice(1)):t.querySelectorAll(e):e}}},{}],6:[function(t,e){e.exports=function(t){return t!==window&&(t instanceof Array||"undefined"!=typeof HTMLCollection&&t instanceof HTMLCollection||"undefined"!=typeof NodeList&&t instanceof NodeList||Array.isArray(t))}},{}],7:[function(t,e){function n(t){this.render(t),this.init()}var r=t("doc-js"),o=t("events").EventEmitter,i=t("interact-js"),a=t("crel"),s=t("venfix"),c=t("laidout");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.distance=0,n.prototype.state="closed",n.prototype.width=280,n.prototype.side="left",n.prototype.gutter=20,n.prototype.render=function(t){this.element=t||a("div",a("div")),this.element.style.opacity="0",this.content=this.element.childNodes[0],this.element.flap=this},n.prototype.bind=function(){var t=this,e=r(this.delegateTarget)[0]||document;i.on("start",e,t._start.bind(t)),i.on("drag",document,t._drag.bind(t)),i.on("end",document,t._end.bind(t)),i.on("cancel",document,t._end.bind(t)),r(this.element).on("click",t._activate.bind(t))},n.prototype.init=function(){var t=this;c(this.element,function(){t.bind(),this.enabled!==!1?t.enable():t.disable(),t.emit("ready"),t.element.style.opacity=null})},n.prototype.enable=function(){this.enabled=!0,this.element.style.position="fixed",this.element.style.top="0px",this.element.style.bottom="0px",this.close(),this.content.style[s("boxSizing")]="border-box",this.content.style.width=this.width+"px",this.content.style.position="absolute",this.content.style.top="0px",this.content.style.bottom="0px",this.content.style.width=this.width+"px",this.content.style["overflow-x"]="hidden",this.content.style["overflow-y"]="auto","left"===this.side?(this.element.style.left="0px",this.content.style.left="0px"):"right"===this.side&&(this.element.style.right="0px",this.content.style.left="100%"),this.update()},n.prototype.disable=function(){this.enabled=!1,this.element.style.position=null,this.element.style.top=null,this.element.style.bottom=null,this.element.style.width=null,this.element.style[s("pointerEvents")]=null,this.content.style[s("boxSizing")]=null,this.content.style[s("transform")]=null,this.content.style.width=null,this.content.style.position=null,this.content.style.top=null,this.content.style.bottom=null,this.content.style.width=null,this.content.style["overflow-x"]=null,this.content.style["overflow-y"]=null,this.element.style.left=null,this.content.style.left=null,this.element.style.right=null,this.content.style.left=null,this.update()},n.prototype._isValidInteraction=function(t){return this.constructor.openFlap?this.constructor.openFlap===this:this.distance?!0:"left"===this.side?t.pageX<this.distance+this.gutter:"right"===this.side?t.pageX>window.innerWidth-this.gutter:void 0},n.prototype._start=function(t){this.enabled&&this._isValidInteraction(t)&&this._setOpen()},n.prototype._drag=function(t){var e=this;if(this.constructor.openFlap===this){var n=t.getCurrentAngle(!0);if(n&&!this.beingDragged&&(n>45&&135>n||-45>n&&n>-135))return;t.preventDefault(),e.beingDragged=!0,e.startDistance=e.startDistance||e.distance,e.distance="left"===e.side?e.startDistance+t.pageX-t.lastStart.pageX:e.startDistance-t.pageX+t.lastStart.pageX,e.distance=Math.max(Math.min(e.distance,e.width),0),e.update(),e.speed=e.distance-e.oldDistance,e.oldDistance=e.distance}},n.prototype._end=function(){if(this.constructor.openFlap===this&&this.beingDragged){this.startDistance=null,this.beingDragged=!1;var t="close";t=Math.abs(this.speed)>=3?this.speed<0?"close":"open":this.distance<this.width/2?"close":"open",this.settle(t)}},n.prototype._activate=function(t){this.enabled&&(r(t.target).closest(this.content)||this.constructor.openFlap!==this||(t.preventDefault(),this.beingDragged=!1,this.settle("close")))},n.prototype._setOpen=function(){if(this.constructor.openFlap!==this){var t=this;this.constructor.openFlap=this,this.element.style.width="100%",this.state="open",this.emit("open"),this._pointerEventTimeout=setTimeout(function(){t.element.style[s("pointerEvents")]="all"},500)}},n.prototype._setClosed=function(){this.constructor.openFlap=null,clearTimeout(this._pointerEventTimeout),this.element.style[s("pointerEvents")]="none",this.element.style.width=this.gutter+"px",this.state="closed",this.emit("close")},n.prototype.update=function(){var t=this;this.distance>0&&this._setOpen(),"left"===this.side?this.displayPosition=t.distance-t.width:"right"===this.side&&(this.displayPosition=-t.distance),t.distance!=t.lastDistance&&requestAnimationFrame(function(){t.updateStyle(t.displayPosition),t.emit("move"),t.lastDistance=t.distance})},n.prototype.updateStyle=function(t){this.enabled&&(this.content.style[s("transform")]="translate3d("+t+"px,0,0)")},n.prototype.settle=function(t){var e=this;return cancelAnimationFrame(this.settleFrame),this.beingDragged?void 0:this.distance<0?(this.distance=0,this._setClosed(),this.update(),void this.emit("settle")):this.distance>this.width?(this.distance=this.width,this.update(),void this.emit("settle")):void(this.settleFrame=requestAnimationFrame(function(){var n=e.tween(t);e.distance+="close"===t?-n:n,e.update(),e.settle(t)}))},n.prototype.tween=function(){return(this.width-this.distance)/4+2},n.prototype.percentOpen=function(){return parseInt(100/this.width*this.distance)},n.prototype.open=function(){this.enabled&&this.settle("open")},n.prototype.close=function(){this.enabled&&this.settle("close")},e.exports=n},{crel:1,"doc-js":9,events:65,"interact-js":71,laidout:13,venfix:78}],8:[function(t,e){e.exports=t(2)},{"./getTarget":10,"./getTargets":11,"./isList":12}],9:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{"./doc":8,"./getTargets":11,"./isList":12}],10:[function(t,e){e.exports=t(4)},{}],11:[function(t,e){e.exports=t(5)},{}],12:[function(t,e){e.exports=t(6)},{}],13:[function(t,e){function n(t){if(!t)return!1;for(var e=t.parentNode;e;){if(e===t.ownerDocument)return!0;e=e.parentNode}return!1}e.exports=function(t,e){if(n(t))return e();var r=function(){n(t)&&(document.removeEventListener("DOMNodeInserted",r),e())};document.addEventListener("DOMNodeInserted",r)}},{}],14:[function(t,e){function n(){}var r=t("gaffa"),o="ajax";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.method=new r.Property({value:"GET"}),n.prototype.auth=new r.Property,n.prototype.dataType="json",n.prototype.cors=new r.Property,n.prototype.trigger=function(t,e,n){var r=this,o=this.gaffa,i=r.source.value,a=function(t,i){r.errors.set(i),e.data=i,r._events.error&&r.emit("error",{domEvent:n,scope:e,error:i}),r.triggerActions("error",e,n),o.notifications.notify("ajax.error."+r.kind,i)};if(o.notifications.notify("ajax.begin."+r.kind),"formData"===r.dataType){var s=new FormData;for(var c in i)i.hasOwnProperty(c)&&null!=i[c]&&s.append(c,i[c]);i=s}e=e||{};var u={cors:r.cors.value,cache:r.cache,type:r.method.value,headers:r.headers.value,url:r.url.value||window.location.pathname,data:i,dataType:r.dataType,auth:r.auth.value,contentType:r.contentType,success:function(t){return o.responseIsError&&o.responseIsError(t)?void a(t):(r.target.set(t,r.cleans===!1),e.data=t,r.emit("success",{domEvent:n,scope:e,data:t}),r.triggerActions("success",e,n),void o.notifications.notify("ajax.success."+r.kind))},error:a,complete:function(){r.emit("complete",{domEvent:n,scope:e}),r.triggerActions("complete",e,n),o.notifications.notify("ajax.complete."+r.kind)}};"file"===r.dataType&&(i=new FormData,i.append("file",r.source.value),u.contentType=!1,u.processData=!1,u.data=i,dataType=!1),o.ajax(u)},n.prototype.target=new r.Property,n.prototype.source=new r.Property,n.prototype.errors=new r.Property,n.prototype.dirty=new r.Property,n.prototype.headers=new r.Property,n.prototype.url=new r.Property,e.exports=n},{gaffa:31}],15:[function(t,e){function n(){}var r=t("gaffa"),o="clean";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(){this.gaffa.model.setDirtyState(this.target.binding,!1,this),this.triggerEvents.value&&this.gaffa.gedi.trigger(this.gaffa.gedi.paths.resolve(this.getPath(),this.target.binding))},n.prototype.target=new r.Property,n.prototype.triggerEvents=new r.Property,e.exports=n},{gaffa:31}],16:[function(t,e){function n(){}var r=t("gaffa"),o=t("fasteach"),i="concat";n=r.createSpec(n,r.Action),n.prototype.type=i,n.prototype.trigger=function(){var t=this.gaffa,e=this.target.value,n=this.source.value;n&&n.slice&&(n=n.slice()),e&&e.concat&&(!Array.isArray(e)||this.clone&&this.clone.value===!1||o(n,function(e,r){n[r]=t.clone(e)}),this.target.set(this.target.value.concat(n),this))},n.prototype.target=new r.Property,n.prototype.source=new r.Property,n.prototype.clone=new r.Property,e.exports=n},{fasteach:35,gaffa:31}],17:[function(t,e){function n(){}var r=t("gaffa"),o="conditional";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.condition=new r.Property,n.prototype.trigger=function(t,e,n){this.condition.value?this.triggerActions("true",e,n):this.triggerActions("false",e,n)},e.exports=n},{gaffa:31}],18:[function(t,e){function n(){}var r=t("gaffa"),o="delay";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.delay=new r.Property,n.prototype.trigger=function(t,e,n){var r=this;setTimeout(function(){r.triggerActions("trigger",e,n)},this.delay.value)},e.exports=n},{gaffa:31}],19:[function(t,e){function n(){}function r(){}var o=t("gaffa"),i="forEach";n=o.createSpec(n,o.Action),n.prototype.type=i,n.prototype.target=new o.Property({trackKeys:!0}),n.prototype.trigger=function(t,e,n){var o=this.target.value,i=this.target._sourcePathInfo&&this.target._sourcePathInfo.subPaths;if(o){e||(e={});for(var a=0;a<o.length;a++){var s=new r;s.gaffa=this.gaffa,s.parent=this,s.sourcePath=i?i[a]:""+a;var c=JSON.parse(JSON.stringify(this.actions.forEach));s.actions.all=c,s=this.gaffa.initialiseViewItem(s,s.gaffa,s.actions.constructors),e.item=o[a],s.triggerActions("all",e,n)}}},r=o.createSpec(r,o.Action),r.prototype.type="eachPsudoParent",e.exports=n},{gaffa:31}],20:[function(t,e){function n(){}var r=t("gaffa"),o="generic";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(t,e){this.gaffa.model.get(this.expression,this,e)},e.exports=n},{gaffa:31}],21:[function(t,e){function n(){}var r=t("gaffa"),o="navigate";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.url=new r.Property,n.prototype.target=new r.Property,n.prototype.data=new r.Property,n.prototype.pushstate=new r.Property,n.prototype.external=new r.Property,n.prototype.trigger=function(){return this.external.value?void(window.location=this.url.value):void this.gaffa.navigate(this.url.value,this.target.value,this.pushstate.value,this.data.value)},e.exports=n},{gaffa:31}],22:[function(t,e){function n(){}var r=t("gaffa"),o="push";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(){var t=this.target.value;if(null==t&&(t=[],this.target.set(t)),!Array.isArray(t))throw"Attempted to push to model property that was not an array, null, or undefined";var e=this.source.value;this.clone&&this.clone.value===!1||(e=this.gaffa.clone(e));var n=this.gaffa.gedi.paths.append(this.target.binding,this.gaffa.gedi.paths.create(t.length.toString()));this.gaffa.model.set(n,e,this,this.cleans.value?!1:null)},n.prototype.target=new r.Property,n.prototype.source=new r.Property,n.prototype.cleans=new r.Property,n.prototype.clone=new r.Property({value:!0}),e.exports=n},{gaffa:31}],23:[function(t,e){function n(){}var r=t("gaffa"),o="remove";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(){this.gaffa.model.remove(this.target.binding,this,this.cleans.value?!1:null)},n.prototype.target=new r.Property,n.prototype.cleans=new r.Property,e.exports=n},{gaffa:31}],24:[function(t,e){function n(){}var r=t("gaffa"),o="set";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(){var t=this.source.value;this.clone&&this.clone.value===!1||(t=this.gaffa.clone(t)),this.target.set(t,this.cleans.value?!1:null)},n.prototype.target=new r.Property,n.prototype.source=new r.Property,n.prototype.clone=new r.Property,n.prototype.cleans=new r.Property,e.exports=n},{gaffa:31}],25:[function(t,e){function n(){}var r=t("gaffa"),o="switch";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype["switch"]=new r.Property,n.prototype.trigger=function(t,e,n){null!=this["switch"].value&&this.triggerActions(this["switch"].value,e,n)},e.exports=n},{gaffa:31}],26:[function(t,e){function n(){}var r=t("gaffa"),o="toggle";n=r.createSpec(n,r.Action),n.prototype.type=o,n.prototype.trigger=function(){this.target.set(!this.target.value,this)},n.prototype.target=new r.Property,e.exports=n},{gaffa:31}],27:[function(t,e){function n(t){t.gaffa.actions.trigger(t.actions.change,t)}function r(){}var o=t("gaffa"),i="modelChange";r=o.createSpec(r,o.Behaviour),r.prototype.type=i,r.prototype.condition=new o.Property({value:!0}),r.prototype.watch=new o.Property({update:function(t,e){t.gaffa;if(t.condition.value){var r=t.throttle;if(isNaN(r))n(t,e);else{var o=new Date;!t.lastTrigger||o-t.lastTrigger>r?(t.lastTrigger=o,n(t,e)):(clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.lastTrigger=o,n(t,e)},r-(o-t.lastTrigger)))}}},sameAsPrevious:function(){var t="object"==typeof this.value||this.getPreviousHash()!==this.value;return this.setPreviousHash(this.value),!t}}),e.exports=r},{gaffa:31}],28:[function(t,e){function n(){}var r=t("gaffa"),o="navigate";n=r.createSpec(n,r.Behaviour),n.prototype.type=o,n.prototype.bind=function(){var t=this;this.gaffa.notifications.add("navigation",function(){t.gaffa.actions.trigger(t.actions.navigate,t)})},e.exports=n},{gaffa:31}],29:[function(t,e){function n(){}var r=t("gaffa"),o="notification";n=r.createSpec(n,r.Behaviour),n.prototype.type=o,n.prototype.notification=new r.Property,n.prototype.bind=function(){var t=this;this.gaffa.notifications.add(this.notification.value,function(){t.triggerActions("notification")})},e.exports=n},{gaffa:31}],30:[function(t,e){function n(){}var r=t("gaffa"),o="pageLoad";n=r.createSpec(n,r.Behaviour),n.prototype.type=o,n.prototype.bind=function(){this.gaffa.actions.trigger(this.actions.load,this)},e.exports=n},{gaffa:31}],31:[function(t,e){"use strict";function n(t){var e=t.split("?"),n={};if(e.length>1)for(var r=e.pop().split("&"),o=0;o<r.length;o++){var i=r[o].split("="),a=window.unescape(i[0]),s=window.unescape(i[1]);n[a]=s}return n}function r(t){var e="";for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e+=(e.length?"&":"?")+n+"="+t[n]);return e}function o(t){return null!=t&&"object"==typeof t?Array.isArray(t)?v([],t):t instanceof Date?new Date(t):v({},t):t}function i(t){try{return JSON.parse(t)}catch(e){return e}}function a(t){var e,o=new XMLHttpRequest;if("object"!=typeof t&&(t={}),t.cors)if("withCredentials"in o);else{if("undefined"==typeof XDomainRequest)throw"Cors is not supported by this browser";o=new XDomainRequest}else o=new XMLHttpRequest;if(t.cache===!1&&(t.data=t.data||{},t.data._=(new Date).getTime()),"get"===t.type.toLowerCase()&&"object"==typeof t.data){e=n(t.url);for(var a in t.data)t.data.hasOwnProperty(a)&&(e[a]=t.data[a]);t.url=t.url.split("?").shift()+r(e),t.data=null}o.addEventListener("progress",t.progress,!1),o.addEventListener("load",function(e){var n=e.target.responseText;"json"===t.dataType&&(n=""===n?void 0:i(n)),e.target.status>=400?t.error&&t.error(e,n instanceof Error?void 0:n):n instanceof Error?t.error&&t.error(e,n):t.success&&t.success(n,e)},!1),o.addEventListener("error",t.error,!1),o.addEventListener("abort",t.abort,!1),o.addEventListener("loadend",t.complete,!1),o.open(t.type||"get",t.url,!0),t.contentType!==!1&&o.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),o.setRequestHeader("X-Requested-With",t.requestedWith||"XMLHttpRequest"),o.setRequestHeader("x-gaffa","request"),t.auth&&o.setRequestHeader("Authorization",t.auth);for(var a in t.headers)o.setRequestHeader(a,t.headers[a]);return t.processData!==!1&&"json"===t.dataType&&(t.data=JSON.stringify(t.data)),o.send(t.data&&t.data),o}function s(t){for(var e=t.viewModel;!e&&t;)t=t.parentNode,t&&(e=t.viewModel);return e}function c(t,e){return function(n,r){var r=r.all();return t.apply(e,r)}}function u(t,e,n){var r={},o=t.model.get("(map items "+n+")",{items:e});if(e&&"object"==typeof e){if(!Array.isArray(e))throw"Object collections are not currently supported";for(var i=0;i<o.length;i++)r[o[i]]=null}return Object.keys(r)}function f(t){var e,n=t.parentNode;return n?(e=t.nextSibling,n.removeChild(t),function(){e?n.insertBefore(t,e&&e.parent&&e):n.appendChild(t)}):!1}function p(t,e,n,r){B.prototype.trigger.call(t,e,n,r),t.trigger(e,n,r)}function l(t,e,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)p(t[o],e,n,r)}function h(t,e,n){var r,o="string"==typeof t?document.querySelectorAll(t)[0]:t;o&&o.childNodes&&(r=o.childNodes[n]),r?o.insertBefore(e,r):o.appendChild(e)}function d(t){for(var e=t.gaffa.gedi,n=[],r=t;r;)null!=r.path&&n.push(r.path),null!=r.sourcePath&&n.push(e.paths.create(r.sourcePath)),r=r.parent;return e.paths.resolve.apply(this,n.reverse())}function v(t,e){function n(t,e){for(var r in e){var i=e[r],a=t[r];if("object"==typeof i&&null!=i)if(a instanceof i.constructor||(a=new i.constructor),i instanceof Date)a=new Date(i);else{if(o.indexOf(i)>=0){t[r]=i;continue}o.push(i),n(a,i)}else a=i;t[r]=a}}var r=Array.prototype.slice.call(arguments),t=r[0]||{},e=r[1]||{},o=[];return n(t,e),void 0!==r[2]&&null!==r[2]&&(r[0]=r.shift(),v.apply(this,r)),t}function g(t){z=z||function(){z=G("style",{type:"text/css","class":"dropdownDefaultStyle"});var t=function(){window.document.head?window.document.head.insertBefore(z):setTimeout(t,100)};return t(),z}(),z.styleSheet?z.styleSheet.cssText=t:z.innerHTML+=t}function y(t,e,n,r){if(r=r||{objects:[],viewItems:[]},!(t instanceof D)){if(!n[t.type])throw"No constructor is loaded to handle view of type "+t.type;var o=r.objects.indexOf(t);if(o>=0)return r.viewItems[o];r.objects.push(t),t=new n[t.type](t),r.viewItems.push(t)}for(var i in t.views){t.views[i]instanceof E||(t.views[i]=new E(t.views[i]));for(var a=t.views[i],s=0;s<a.length;s++){var c=m(a[s],e,r);a[s]=c,c.parentContainer=a}}for(var i in t.actions)for(var u=t.actions[i],f=0;f<u.length;f++){var p=w(u[f],e,r);u[f]=p,p.parentContainer=u}if(t.behaviours)for(var l=0;l<t.behaviours.length;l++){var h=b(t.behaviours[l],e,r);t.behaviours[l]=h,h.parentContainer=t.behaviours}return t}function m(t,e,n){return y(t,e,e.views.constructors,n)}function w(t,e,n){return y(t,e,e.actions.constructors,n)}function b(t,e,n){return y(t,e,e.behaviours.constructors,n)}function x(t){if(t){t=t instanceof Array?t:[t],t=t.slice();for(var e=0;e<t.length;e++)t[e].remove()}}function _(t,e,n){var r=new t.constructor,o=Array.isArray(t)||t instanceof Array&&[]||{},i=["gaffa","parent","parentContainer","renderedElement","_removeHandlers","gediCallbacks","__super__","_events"],a=["type"];e&&(i=i.concat(e)),n&&(a=a.concat(n));for(var s in t)(a.indexOf(s)>=0||t.hasOwnProperty(s)&&i.indexOf(s)<0&&!Q(r[s],t[s]))&&(o[s]=t[s]);return Object.keys(o).length?o:void 0}function P(t,e){for(var n,r=t;r&&!n;)n=r.group,r=r.parent;return{viewItem:t,groupKey:n,modelTarget:e&&e.target}}function A(t,e){if(e&&t.update(t.parent,t.value),!t.sameAsPrevious()&&!t.nextUpdate){if(t.gaffa.debug)return void t.update(t.parent,t.value);t.nextUpdate=re(function(){t.update(t.parent,t.value),t.nextUpdate=null})}}function j(t){return function(e){var n,r,o;if(e){if(r=P(t.parent,e),e===!0)o=t.gaffa.model.get(t.binding,t,r,!0);else{if("bubble"===e.captureType&&t.ignoreBubbledEvents)return;if(t.binding){if(t.ignoreTargets&&e.target.toString().match(t.ignoreTargets))return;o=e.getValue(r,!0)}}if(o){var i=o[o.length-1];n=i.result,t._sourcePathInfo=i.sourcePathInfo}t.value=n}t.update&&A(t,e===!0)}}function T(t){if(this.parent=t,null==this.binding)return void(this.update&&this.update(t,this.value));var e=j(this);this.gaffa.model.bind(this.binding,e,this),e(!0)}function k(t){return t&&"object"==typeof t?Object.keys(t):t}function N(t,e){if(t&&e&&"object"==typeof t&&"object"==typeof e){var n=Object.keys(t);if(n.length!==e.length)return;for(var r=0;r<e.length;r++)if(e[r]!==n[r])return;return!0}return t===e}function O(t){if("function"==typeof t)this.update=t;else for(var e in t)this[e]=t[e];this.gediCallbacks=[]}function E(t){var e=this;this._deferredViews=[],t instanceof Array&&e.add(t)}function S(t){var e=t._deferredViews.splice(0,5);if(e.length){for(var n=0;n<e.length;n++)t.add(e[n][0],e[n][1]);re(function(){S(t)})}}function C(t,e){if(t&&"object"==typeof t&&e&&"object"==typeof e)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function I(t){for(var e in t)t[e]instanceof O&&t[e].debind();t.emit("debind"),t._bound=!1}function L(t){t.parentContainer&&(t.parentContainer&&(t.parentContainer.splice(t.parentContainer.indexOf(t),1),t.parentContainer=null),t.debind(),t.emit("remove"))}function D(t){for(var e in this)this[e]instanceof O&&(this[e]=new this[e].constructor(this[e]));this.actions=this.actions?o(this.actions):{};for(var e in t){var n=this[e];n instanceof O||n instanceof E?C(t[e],n):this[e]=t[e]}}function M(t,e){var n=P(t);return n.event={shiftKey:e.shiftKey,altKey:e.altKey,which:e.which,target:e.target,targetViewItem:s(e.target),preventDefault:c(e.preventDefault,e),stopPropagation:c(e.stopPropagation,e)},n}function R(t,e){return t.gaffa.events.on(e,t.renderedElement,function(n){l(t.actions[e],t,M(t,n),n)})}function q(){var t=this;t._removeHandlers=[],t.behaviours=t.behaviours||[]}function V(t,e,n){var r=t.gaffa,o=t.insertSelector||t.renderTarget||e&&e.element||r.views.renderTarget;if(t.afterInsert)var i=K.on("DOMNodeInserted",o,function(e){K.closest(t.renderedElement,e.target)&&(t.afterInsert(),i())});e.indexOf(t)!==n&&e.splice(n,1,t),t.insertFunction(t.insertSelector||o,t.renderedElement,n)}function F(){}function H(){}function W(){}function X(){}function J(){this.views=this.views||{},this.views.content=new E(this.views.content)}function B(){}function U(){}function $(){function t(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else e.gaffa=w,e.parentContainer=j,U.prototype.bind.call(e),e.bind(),j.push(e)}function e(t,e){T[t]=T[t]||[],T[t].push(e)}function r(t,e){for(var n=0;n<t.length;n++)t[n](e)}function i(t){for(var e=t.split("."),n=0;n<e.length;n++){var o=e.slice(0,n+1).join(".");T[o]&&r(T[o])}}function c(){var t=n(window.location.search);for(var e in t)t.hasOwnProperty(e)&&(t[e]?w.model.set(e,t[e]):w.model.set(e,null))}function u(t,e){var n=w.views;if(e){var r=e.split("."),o=r[0],i=r[1];n=w.namedViews[o].views[i]}for(;k.length;)clearInterval(k.pop());if(t.views&&n.empty(),t.model&&(d.set({}),w.model.set(t.model,null,null,!1)),t.views){for(var a=0;a<t.views.length;a++)t.views[a]=m(t.views[a],w);n.add(t.views)}if(t.behaviours){for(var a=0;a<t.behaviours.length;a++)t.behaviours[a]=b(t.behaviours[a],w);w.behaviours.add(t.behaviours)}c()}function p(t,e,n,r){function o(r){var o;r.target=e,void 0!==r&&null!==r&&r.title&&(o=r.title),n!==!1&&w.pushState(r,o,t),N[t]=JSON.stringify(r),u(r,e),w.notifications.notify("navigation.success"),window.scrollTo(0,0)}function i(t){w.notifications.notify("navigation.error",t)}function a(){w.notifications.notify("navigation.complete")}return w.notifications.notify("navigation.begin"),w.cacheNavigates!==!1&&N[t]?(o(JSON.parse(N[t])),void a()):void w.ajax({headers:{"x-gaffa":"navigate"},cache:"Microsoft Internet Explorer"!==navigator.appName,url:t,type:"get",data:r,dataType:"json",success:o,error:i,complete:a})}function h(t){t.windowLocation=window.location.toString()}var d,w={},P={},A=[],j=[],T={},k=[];d=new Y(P),w.gedi=d;var N={};w.onpopstate=function(t){t.state&&p(window.location.toString(),t.state.target,!1)},window.onpopstate=w.onpopstate;var E={addDefaultStyle:g,createSpec:te,jsonConverter:_,initialiseViewItem:y,events:{on:function(t,e,n){return"on"+t.toLowerCase()in e?K.on(t,e,n):void 0}},model:{get:function(t,e,n,r){e instanceof D||e instanceof O||(n=e,e=void 0);var o;return e&&e.getPath&&(o=e.getPath()),n=n||{},h(n),d.get(t,o,n,r)},set:function(t,e,n,r){var o;null!=t&&(n&&n.getPath&&(o=n.getPath()),d.set(t,e,o,r))},remove:function(t,e,n){var r;null!=t&&(e&&e.getPath&&(r=e.getPath()),d.remove(t,r,n))},bind:function(t,e,n){var r;n&&n.getPath&&(r=n.getPath()),n.gediCallbacks||(n.gediCallbacks=[]),n.gediCallbacks.push(function(){d.debind(e)}),d.bind(t,e,r)},debind:function(t){for(;t.gediCallbacks&&t.gediCallbacks.length;)t.gediCallbacks.pop()()},isDirty:function(t,e){var n;if(null!=t)return e&&e.getPath&&(n=e.getPath()),d.isDirty(t,n)},setDirtyState:function(t,e,n){var r;null!=t&&(n&&n.getPath&&(r=n.getPath()),d.setDirtyState(t,e,r))}},views:{renderTarget:"body",add:function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)w.views.add(t[n]);else t.name&&(w.namedViews[t.name]=t),t.gaffa=w,t.parentContainer=A,t.render(),t.renderedElement.viewModel=t,t.bind(),t.insert(A,e)},remove:x,empty:function(){x(A)},constructors:{}},namedViews:{},actions:{trigger:l,constructors:{}},behaviours:{add:t,constructors:{}},utils:{getProp:function(t,e){for(var n=e.split($.pathSeparator).reverse();n.length;){var r=n.pop();if(void 0===t[r]||null===t[r])return;t=t[r]}return t},propExists:function(t,e){for(var n=e.split(".").reverse();n.length;){var r=n.pop();if(void 0===t[r]||null===t[r])return!1;t=t[r]}return!0},deDom:f},navigate:p,notifications:{add:e,notify:i},load:function(t,e){var n;void 0!==t&&null!==t&&t.title&&(n=t.title),e&&w.pushState(t,n,document.location),u(t)},queryStringToModel:c,extend:v,clone:o,ajax:a,crel:G,doc:K,fastEach:Z,getClosestItem:s,pushState:function(t,e,n){window.history.pushState(t,e,n)}};return v(w,E),w}{var z,Y=t("gedi"),K=t("doc-js"),G=t("crel"),Z=t("fasteach"),Q=t("deep-equal"),te=t("spec-js"),ee=t("events").EventEmitter,ne=t("./raf.js"),re=ne.requestAnimationFrame;ne.cancelAnimationFrame}String.prototype.format=function(t){return this.replace(/{(\d+)}/g,function(e,n){return void 0==t[n]||null==t[n]?e:t[n]}).replace(/{(\d+)}/g,"")},String.prototype.deformat=function(t){for(var e,n=/{(\d+)}/g,r=[],o=0;null!=(e=n.exec(t));)r[o]=parseInt(e[1]),o++;var i=new RegExp("^"+t.replace(/[-[\]()*+?.,\\^$|#\s]/g,"\\$&").replace(/(\{\d+\})/g,"(.*?)")+"$","g"),a=i.exec(this);
if(!a)return!1;for(var s=[],c=0;c<r.length;c++)s.push(a[r[c]+1]);return s},O=te(O),O.prototype.set=function(t,e){var n=this.gaffa;this.binding?n.model.set(this.binding,this.setTransform?n.model.get(this.setTransform,this,{value:t}):t,this,e):(this.value=t,this._previousHash=k(t),this.update&&this.update(this.parent,t))},O.prototype.sameAsPrevious=function(){return N(this.value,this._previousHash)?!0:void(this._previousHash=k(this.value))},O.prototype.setPreviousHash=function(t){this._previousHash=t},O.prototype.getPreviousHash=function(){return this._previousHash},O.prototype.bind=T,O.prototype.debind=function(){this.gaffa&&this.gaffa.model.debind(this)},O.prototype.getPath=function(){return d(this)},O.prototype.toJSON=function(){var t=_(this,["_previousHash"]);return t},E=te(E,Array),E.prototype.bind=function(t){if(this.parent=t,this.gaffa=t.gaffa,!this._bound){this._bound=!0;for(var e=0;e<this.length;e++)this.add(this[e],e);return this}},E.prototype.debind=function(){if(this._bound){this._bound=!1;for(var t=0;t<this.length;t++)this[t].detach(),this[t].debind()}},E.prototype.getPath=function(){return d(this)},E.prototype.add=function(t,e){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this.add(t[n]);return this}return t.parentContainer&&t.parentContainer.splice(t.parentContainer.indexOf(t),1),this.splice(e>=0?e:this.length,0,t),t.parentContainer=this,this._bound&&(t instanceof q||(t=this[this.indexOf(t)]=y(t,this.gaffa,this.gaffa.views.constructors)),t.gaffa=this.gaffa,this.gaffa.namedViews[t.name]=t,t.renderedElement||(t.render(),t.renderedElement.viewModel=t),t.bind(this.parent),t.insert(this,e)),this},E.prototype.deferredAdd=function(t,e){var n=this,r=!this._deferredViews.length;this._deferredViews.push([t,e]),r&&re(function(){S(n)})},E.prototype.abortDeferredAdd=function(){this._deferredViews=[]},E.prototype.remove=function(t){t.remove()},E.prototype.empty=function(){x(this)},E.prototype.toJSON=function(){return _(this,["element"])},D=te(D,ee),D.prototype.path="[]",D.prototype.bind=function(t){var e,n=this;this.parent=t,this._bound=!0;for(var r in this.constructor.prototype)e=this[r],e instanceof O&&(e.gaffa=n.gaffa,e.bind(this))},D.prototype.debind=function(){I(this)},D.prototype.remove=function(){L(this)},D.prototype.getPath=function(){return d(this)},D.prototype.getDataAtPath=function(){return this.gaffa?this.gaffa.model.get(d(this)):void 0},D.prototype.toJSON=function(){return _(this)},D.prototype.triggerActions=function(t,e,n){this.gaffa.actions.trigger(this.actions[t],this,e,n)},q=te(q,D),q.prototype.bind=function(){D.prototype.bind.apply(this,arguments);for(var t=0;t<this.behaviours.length;t++)this.behaviours[t].gaffa=this.gaffa,U.prototype.bind.call(this.behaviours[t],this),this.behaviours[t].bind(this);for(var e in this.actions){var n,r=this.actions[e];r.__bound||(r.__bound=!0,n=R(this,e),n&&this._removeHandlers.push(n))}},q.prototype.detach=function(){this.renderedElement&&this.renderedElement.parentNode&&this.renderedElement.parentNode.removeChild(this.renderedElement)},q.prototype.remove=function(){this.detach(),L(this)},q.prototype.debind=function(){for(var t=0;t<this.behaviours.length;t++)this.behaviours[t].debind();for(;this._removeHandlers.length;)this._removeHandlers.pop()();for(var e in this.actions)this.actions[e].__bound=!1;I(this)},q.prototype.render=function(){},q.prototype.insert=function(t,e){V(this,t,e)},F=te(F,O),F.prototype.update=function(t,e){K.removeClass(t.renderedElement,this._previousClasses),this._previousClasses=e,K.addClass(t.renderedElement,e)},q.prototype.classes=new F,H=te(H,O),H.prototype.value=!0,H.prototype.update=function(t,e){t.renderedElement.style.display=e?"":"none"},q.prototype.visible=new H,W=te(W,O),W.prototype.value=!0,W.prototype.update=function(t,e){!e!=!!t.renderedElement.getAttribute("disabled")&&t.renderedElement[e?"removeAttribute":"setAttribute"]("disabled","disabled")},q.prototype.enabled=new W,X=te(X,O),X.prototype.update=function(t,e){t.renderedElement[e?"setAttribute":"removeAttribute"]("title",e)},q.prototype.title=new X,q.prototype.insertFunction=h,J=te(J,q),J.prototype.bind=function(){q.prototype.bind.apply(this,arguments);for(var t in this.views){var e=this.views[t];e instanceof E&&e.bind(this)}},J.prototype.debind=function(){q.prototype.debind.apply(this,arguments);for(var t in this.views){var e=this.views[t];e instanceof E&&e.debind()}},B=te(B,D),B.prototype.bind=function(){D.prototype.bind.call(this)},B.prototype.trigger=function(t,e){this.parent=t,e=e||{};var n=this.gaffa=t.gaffa;for(var r in this.constructor.prototype){var o=this[r];o instanceof O&&o.binding&&(o.gaffa=n,o.parent=this,o.value=n.model.get(o.binding,this,e))}this.debind()},U=te(U,D),U.prototype.toJSON=function(){return _(this)},$.pathSeparator="/",$.Property=O,$.ViewContainer=E,$.ViewItem=D,$.View=q,$.ContainerView=J,$.Action=B,$.createSpec=te,$.Behaviour=U,$.addDefaultStyle=g,$.propertyUpdaters={group:function(t,e,n,r){return function(o,i){var a,s,c=this,f=c.gaffa,p=o.views[t],l=c.previousGroups;if(i&&"object"==typeof i){if(o.distinctGroups=u(f,c.value,c.expression),l){if(l.length===o.distinctGroups.length)return;for(var h=!0,d=0;d<l.length;d++){var v=l[d];v!==o.distinctGroups[v]&&(h=!1)}if(h)return}c.previousGroups=o.distinctGroups;for(var d=0;d<p.length;d++){var g=p[d];o.distinctGroups.indexOf(g.group)<0&&(p.splice(d,1),d--,n(o,i,g))}for(var d=0;d<o.distinctGroups.length;d++){for(var v=o.distinctGroups[d],y=!1,d=0;d<p.length;d++)child.group===p[d]&&(y=!0);y||(a={group:v},e(o,i,a))}s=!p.length,r(o,s)}else for(var d=0;d<p.length;d++)p.splice(index,1),n(o,c.value,p[d])}}},e.exports=$},{"./raf.js":47,crel:32,"deep-equal":33,"doc-js":34,events:65,fasteach:35,gedi:37,"spec-js":46}],32:[function(t,e,n){!function(t,r){"object"==typeof n?e.exports=r():"function"==typeof define&&define.amd?define(r):t.crel=r()}(this,function(){function t(){var n,r=window.document,o=arguments,i=r.createElement(o[0]),a=o[1],s=2,c=o.length,u=t.attrMap;if(1===c)return i;if(("object"!=typeof a||e(a))&&(--s,a=null),c-s===1&&"string"==typeof o[s]&&void 0!==i.textContent)i.textContent=o[s];else for(;c>s;++s)n=o[s],null!=n&&(e(n)||(n=r.createTextNode(n)),i.appendChild(n));for(var f in a)if(u[f]){var p=t.attrMap[f];"function"==typeof p?p(i,a[f]):i.setAttribute(p,a[f])}else i.setAttribute(f,a[f]);return i}var e="object"==typeof Node?function(t){return t instanceof Node}:function(t){return t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName};return t.attrMap={},t.isNode=e,t})},{}],33:[function(t,e){function n(t){return null===t||void 0===t}function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t,e){if(n(t)||n(e))return!1;if(t.prototype!==e.prototype)return!1;if(r(t))return r(e)?(t=i.call(t),e=i.call(e),s(t,e)):!1;try{var o,c,u=a(t),f=a(e)}catch(p){return!1}if(u.length!=f.length)return!1;for(u.sort(),f.sort(),c=u.length-1;c>=0;c--)if(u[c]!=f[c])return!1;for(c=u.length-1;c>=0;c--)if(o=u[c],!s(t[o],e[o]))return!1;return!0}var i=Array.prototype.slice,a="function"==typeof Object.keys?Object.keys:function(t){var e=[];for(var n in t)e.push(n);return e},s=e.exports=function(t,e){return t===e?!0:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():"object"!=typeof t&&"object"!=typeof e?t==e:o(t,e)}},{}],34:[function(t,e,n){!function(t,r){"object"==typeof n?e.exports=r():"function"==typeof define&&define.amd?define(r):t.doc=r()}(this,function(){function t(t){return"string"==typeof t}function e(e){return t(e)?r.find(e)[0]:e}function n(t){e(t.target).addEventListener(t.event,t.callback,!1)}var r={},o=this.window,i=o&&o.document;return r.find=function(t,n){return null==n&&(n=t,t=i),t=e(t),t?t.querySelectorAll(n):[]},r.closest=function(t,n){for(t=e(t);t&&t.ownerDocument&&!r.is(t,n);)t=t.parentNode;return t===i&&t!==n?null:t},r.is=function(t,n){return t=e(t),t.ownerDocument&&"string"==typeof n?t===n||Array.prototype.slice.call(r.find(t.parentNode,n)).indexOf(t)>=0:t===n},r.addClass=function(t,n){if(t=e(t),!n)return this;for(var n=n.split(" "),r=t.className.split(" "),o=0;o<n.length;o++){var i=n[o];i&&" "!==i&&(t.classList?t.classList.add(i):!r.indexOf(i)>=0&&r.push(i))}return t.classList||(t.className=r.join(" ")),this},r.removeClass=function(t,n){if(t=e(t),!n)return this;for(var n=n.split(" "),r=t.className.split(" "),o=0;o<n.length;o++){var i=n[o];if(i&&" "!==i)if(t.classList)t.classList.remove(i);else{var a=r.indexOf(i);a>=0&&r.splice(a,1)}}return t.classList||(t.className=r.join(" ")),this},r.on=function(t,o,a,s){var c=[];"string"==typeof t&&(t=t.split(" "));for(var u=0;u<t.length;u++){var f={};s?(s===!0&&(s=i),f.target=s,f.callback=function(t){var e=r.closest(t.target,o);e&&a(t,e)}):(f.target=o,f.callback=a),f.event=t[u],n(f),c.push(f)}return function(){for(;c.length;){var t=c.pop();e(t.target).removeEventListener(t.event,t.callback)}}},r.off=function(t,n,r,o){"string"==typeof t&&(t=t.split(" ")),"function"!=typeof r&&(o=r,r=null),o=o?e(o):i;for(var a=find(n,o),s=0;s<a.length;s++)for(var c=a[s],u=0;u<t.length;u++)c.removeEventListener(t[u],r)},r.isVisible=function(t){for(;t.parentNode&&"none"!==t.style.display;)t=t.parentNode;return t===i},r})},{}],35:[function(t,e){function n(t,e){for(var n=0;n<t.length&&!e(t[n],n,t);n++);return t}e.exports=n},{}],36:[function(t,e){var n="undefined"!=typeof n?WeakMap:t("weak-map"),r=t("gedi-paths"),o=r.constants;modelOperations=t("./modelOperations"),get=modelOperations.get,set=modelOperations.set;var i="undefined"!=typeof Node;e.exports=function(t,e,a){function s(){P={},A=new n,j=new n,T=new n}function c(e,n){return function(r,o){return t(e,n,r,o)}}function u(e){this.model=t(),this.events={},this.alreadyEmitted={},this.target=e}function f(t,e,n){var o=get(t,P);for(var i in o){var a=r.append(t,i);e.pushPath(a,"sink",n),f(a,e,n)}}function p(t,e,n){for(var o=r.toParts(t),i=0;i<o.length-1;i++)e.pushPath(r.create(o.slice(0,i+1)),"bubble",n)}function l(t,e){t=r.resolve(r.createRoot(),t);var n=new u(t);p(t,n),e&&n.pushPath(r.resolve(t,o.upALevel),"keys"),n.pushPath(t,"target"),f(t,n),n.emit()}function h(t){var n=[];if(k[t])return k[t];if(!e)return k[t]=[n.create(t)];for(var r=e.tokenise(t),o=0;o<r.length;o++){var i=r[o];i instanceof a&&n.push(i.original)}return k[t]=n}function d(e){for(var n=t(),o=r.toParts(e),i=e,a=get(e,n);"object"!=typeof a&&o.length;)o.pop(),i=r.create(o),a=get(i,n);x(i,a)}function v(t,e){if(t.indexOf(o.wildcard)>=0){var n=r.toParts(t);t=r.create(n.slice(0,n.indexOf(o.wildcard)))}var i=r.resolve(e.parentPath,t),a=get(i,P)||{},s=A.get(a),c=j.get(e.callback);s||(s=[],A.set(a,s)),c||(c=[],j.set(e.callback,c)),c.push(i),s.push(e),set(i,a,P),d(t)}function g(t,e){for(var n=h(t),r={},o=0;o<n.length;o++){var i=n[o];r[i]||(r[i]=!0,v(i,e))}}function y(t,e,n,o){n=n||r.create();var i={binding:o||t,callback:e,parentPath:n};return r.is(t)?v(t,i):void g(t,i)}function m(t,e,n){if(t.indexOf(o.wildcard)>=0&&h(t)[0]===t){for(var i=r.toParts(r.resolve("[/]",n,t)),a=r.toParts(e),s=0;s<i.length;s++){var c=i[s];if(c===o.wildcard)i[s]=a[s];else if(c!==a[s])return!1}return r.create(i)}}function w(t,e){for(var n=h(t),r=0;r<n.length;r++){var o=n[r];b(o,e)}}function b(t,e){if(!t&&!e)return void s();if("function"==typeof t&&(e=t,t=null),!r.create(t))return w(t,e);if(null!=t){t=r.resolve(r.createRoot(),t);var n=get(t,P),o=A.get(n);if(o)for(var i=0;i<o.length;i++){var a=o[i];e&&e!==a.callback||(o.splice(i,1),i--)}}else{var c=e&&j.get(e);if(c)for(;c.length;)w(c.pop(),e)}}function x(t,e){if(e&&"object"==typeof e){var t=r.resolve(r.createRoot(),t),n=T.get(e);if(n||(n={},T.set(e,n)),t in n||(n[t]=null),!(i&&e instanceof Node))for(var o in e){var a=e[o];if(a&&"object"==typeof a){var s=r.append(t,o);T.has(a)?a!==e&&(T.get(a)[s]=null):x(s,a)}}}}function _(t,e){if(e&&"object"==typeof e){var t=r.resolve(r.createRoot(),t),n=T.get(e);if(n){delete n[t],Object.keys(n).length||T["delete"](e);for(var o in e){var i=e[o];i&&"object"==typeof i&&i!==e&&_(r.append(t,r.create(o)),i)}}}}var P,A,j,T;s(),u.prototype.pushPath=function(t,e,n){var o=this.events[t];if(o&&"target"!==e&&"keys"!==e||(this.events[t]=e),!n){var i,a,s=get(t,this.model),c=s&&"object"==typeof s&&T.get(s),u=r.toParts(t),l=r.toParts(this.target);if(c&&1!==Object.keys(c).length)for(var h in c)i=r.toParts(h),a=r.create(i.concat(l.slice(u.length))),p(a,this,!0),this.pushPath(a,"target",!0),f(a,this,!0)}},u.prototype.emit=function(){var t,e,n=this;for(var r in this.events){var o=this.events[r];if(t=get(r,P),e=t&&A.get(t))for(var i=0;i<e.length;i++){var a=e[i],s=a.binding,u=m(s,n.target,a.parentPath);u!==!1&&a.callback({target:n.target,binding:u||a.binding,captureType:o,getValue:c(u||a.binding,a.parentPath)})}}};var k={};return{bind:y,trigger:l,debind:b,addModelReference:x,removeModelReference:_}}},{"./modelOperations":38,"gedi-paths":40,"weak-map":44}],37:[function(t,e){function n(t){function e(t,e){var n=Array.isArray(t);for(var r in t)if((!n||!isNaN(r))&&e(t[r],r,t))break;return t}function n(t,e){var n=e;memoiseCache={};var r=i.toParts(t),o=0,a=r.length;if(i.isRoot(t))return void overwriteModel({},e);for(i.isAbsolute(t)&&(o=1);a>o;o++){var s=r[o];if("object"!=typeof n[s]&&a-1>o)break;o===a-1?n instanceof Array?n.splice(s,1):delete n[s]:n=n[s]}return n}function c(e,n,r,o){if(n&&"string"!=typeof n&&(r=n,n=i.create()),e){var a=e;return r=r||{},r._gmc_=n,w.evaluate(a,r,o)}return n=n||i.create(),e=i.resolve(n,e),u(e,t)}function p(t,n,r){var o,i={_gmc_:n},a=w.evaluate(t,i,!0)[0],s=a.sourcePathInfo;if(s){if(s.subPaths)return void e(s.subPaths,function(t){r(t)});o=s.path}else o=a.path;o&&r(o)}function h(){}function d(e,n,r,o){if("object"!=typeof e||i.create(e)?"boolean"==typeof r&&(o=r,r=void 0):(o=n,n=e,e=i.createRoot()),e&&!arguments[4])return void p(e,r,function(t){d(t,n,r,o,!0)});r=r||i.create(),e=i.resolve(r,e),g(e,o);var a=u(e,t),s=f(e,n,t);n instanceof h||(_.addModelReference(e,n),_.trigger(e,s)),n&&"object"!=typeof n||!a||"object"!=typeof a||_.removeModelReference(e,a)}function v(e,r,o){if(r instanceof Boolean&&(o=r,r=void 0),!e||arguments[3]){r=r||i.create(),e=i.resolve(r,e),g(e,o);var s=u(e,t),c=n(e,t);_.trigger(Array.isArray(c)?i.resolve(i.createRoot(),i.append(e,a.upALevel)):e),_.removeModelReference(e,s)}else{parentPaths={},p(e,r,function(t){d(t,new h,r,o,!0),parentPaths[i.append(t,i.create(a.upALevel))]=null});for(var f in parentPaths)if(parentPaths.hasOwnProperty(f)){var r=i.resolve(r||i.createRoot(),f),c=u(r,t),l=Array.isArray(c);if(l){for(var v,y=0;y<c.length;y++)c[y]instanceof h&&(c.splice(y,1),y--,v=!0);v&&_.trigger(r)}else for(var f in c)c[f]instanceof h&&(delete c[f],_.trigger(i.append(r,f)))}}}function g(t,e,n){var r=b;if(t&&!arguments[3])return void p(t,n,function(t){g(t,e,n,!0)});if(!i.create(t))throw l.invalidPath;if(n=n||i.create(),e=e!==!1,i.isRoot(t))return void(b={_isDirty_:e});var o=0;i.isAbsolute(t)&&(o=1);for(var a=i.toParts(i.resolve(n,t));o<a.length;o++){var s=a[o];("object"!=typeof r[s]||null===r[s])&&o<a.length-1&&(r[s]={}),o===a.length-1?(r[s]={},r[s]._isDirty_=e):r=r[s]}a.length||(b._isDirty_=e)}function y(t){var e,n=function(t){if("object"!=typeof t)return!1;if(t._isDirty_)return!0;for(var e in t)if(n(t[e]))return!0};return e=u(t,b),!!n(e)}function m(){}t=t||{};var w=new r,b={},x=o(u,t),_=s(c,w,x);return _.addModelReference("[/]",t),Array.prototype.indexOf=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this===t)return e},String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},Array.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},w.tokenConverters.push(x),w.scope.isDirty=function(t,e){var n=e.raw()[0];return y(i.resolve(t.get("_gmc_"),n instanceof x?n.original:i.create()))},w.scope.getAllDirty=function(e,n){var r,o,a=n.raw()[0],s=i.resolve(e.get("_gmc_"),a instanceof x&&a.original),c=u(s,t);if(null==c)return null;r=c.constructor();for(var f in c)c.hasOwnProperty(f)&&(o=i.resolve(s,i.create(f)),r instanceof Array?y(o)&&r.push(c[f]):y(o)&&(r[f]=c[f]));return r},m.prototype={paths:{create:i.create,resolve:i.resolve,isRoot:i.isRoot,isAbsolute:i.isAbsolute,append:i.append,toParts:i.toParts},get:c,set:d,remove:v,utils:{get:u,set:f},init:function(t){this.set(t,!1)},bind:_.bind,debind:_.debind,trigger:_.trigger,isDirty:y,setDirtyState:g,gel:w,getNumberOfBindings:function(){function t(e){var n=e.length;for(var r in e)isNaN(r)&&(n+=t(e[r]));return n}return t(internalBindings)}},new m}var r=t("gel-js"),o=t("./pathToken"),i=(r.Token,t("gedi-paths")),a=i.constants,s=(t("spec-js"),t("./events")),c=t("./modelOperations"),u=c.get,f=c.set,p=n,l={invalidPath:"Invalid path syntax"};e.exports=p},{"./events":36,"./modelOperations":38,"./pathToken":45,"gedi-paths":40,"gel-js":41,"spec-js":46}],38:[function(t,e){function n(t,e){if(!t)return e;var n=a[t];if(n&&n.model===e)return n.value;if(i.isRoot(t))return e;var r=i.toParts(t),o=e,s=0,c=r.length;for(i.isAbsolute(t)&&(s=1);c>s;s++){var u=r[s];if(null==o)break;if("object"!=typeof o[u]){o=o[u],c-1>s&&(o=void 0);break}o=o[u]}return a[t]={model:e,value:o},o}function r(t,e){if(t!==e){for(var n in e)delete e[n];for(var r in t)e[r]=t[r]}}function o(t,e,n){if(t){a={},"object"==typeof t&&(e=t,t=i.createRoot());var o=i.toParts(t),s=0,c=o.length;if(i.isRoot(t))return void r(e,n);i.isAbsolute(t)&&(s=1);for(var u,f=n;c>s;s++){var p=o[s];("object"!=typeof f[p]||null===f[p])&&c-1>s&&(f[p]=isNaN(p)?{}:[]),s===c-1?(p in f||(u=!0),f[p]=e):f=f[p]}return u}}var i=t("gedi-paths"),a={};e.exports={get:n,set:o}},{"gedi-paths":40}],39:[function(t,e){e.exports=function(t){if("["===t.charAt(0)){var e=1;do{if("\\"===t.charAt(e)&&"\\"===t.charAt(e+1)||"\\"===t.charAt(e)&&("["===t.charAt(e+1)||"]"===t.charAt(e+1)))e++;else if("]"===t.charAt(e))return t.slice(0,e+1);e++}while(e<t.length)}}},{}],40:[function(t,e){function n(t){return m+(null==t?"":t)+w}function r(){for(var t,e=[],n=arguments.length;n--&&(e.unshift.apply(e,a(arguments[n])),!u(arguments[n])););if(t=e.join(","),x[t])return x[t];for(var r,e,i,s=[],c=0;c<e.length;c++)if(i=e[c],i===g)null!=r&&(s.push(r),r=null);else if(i===y)s=[""];else if(i.slice(-v.length)===v)i!==v&&s.push(i.slice(0,-v.length));else if(i===d)r=s.pop();else if(i.slice(0,2)===d)for(var f=i.slice(2);s[s.length-1]!==f;){if(0===s.length)throw"Named path part was not found: '"+i+"', in path: '"+arguments[n]+"'.";r=s.pop()}else s.push(i);return x[t]=o(s)}function o(t){if("number"==typeof t&&(t=t.toString()),null==t)return n();if("string"==typeof t){if(_[t])return _[t];if(t.charAt(0)===m){var e=t.toString(),r=l(e);return r&&r.length===e.length?_[e]=r:!1}return o(n(t))}if(t instanceof Array){for(var a=[],s=0;s<t.length;s++){var c=t[s];c.indexOf("\\")>=0&&(c=c.replace(/([\[|\]|\\|\/])/g,"\\$1")),a.push(c)}return 1===a.length&&a[0]===y?i():n(a.join(h))}}function i(){return o([y,y])}function a(t){var e=typeof t;if("string"===e||"number"===e){if(c(t)||(t=o(t),t!==!1)){t=t.slice(1,-1);var n,r,i,a=0;if(t.indexOf("\\")<0)return""===t?[]:t.split(h);n=[];for(var s=0;s<t.length;s++)i=t.charAt(s),i===h?(n.push(t.slice(a,s)),a=s+1):"\\"===i&&(r=t.charAt(s+1),"\\"===r?t=t.slice(0,s)+t.slice(s+1):"]"===r||"["===r?t=t.slice(0,s)+t.slice(s+1):r===h&&n.push(t.slice(a),s));return n.push(t.slice(a)),n}}else if(Array.isArray(t))return t}function s(){var t=a(arguments[0]);if(t){f(arguments[0])&&t.pop();for(var e=1;e<arguments.length;e++){var n=a(arguments[e]);n&&t.push.apply(t,n)}return o(t)}}function c(t){return("string"==typeof t||t instanceof String)&&t.charAt(0)==m&&t.charAt(t.length-1)==w}function u(t){var e=a(t);return null==e?!1:e[0]===y}function f(t){var e=a(t);return null==e?!1:u(e)&&e[0]===e[1]||0===e.length}function p(t){var e=a(t),n=e[e.length-1];return n&&n.slice(-v.length)===v}var l=t("./detectPath"),h="/",d="..",v="...",g="#",y="",m="[",w="]",b="*",x={},_={};e.exports={resolve:r,create:o,is:c,isAbsolute:u,isRoot:f,isBubbleCapture:p,append:s,toParts:a,createRoot:i,constants:{separator:h,upALevel:d,currentKey:g,root:y,start:m,end:w,wildcard:b}}},{"./detectPath":39}],41:[function(t,e){function n(t,e){for(var n=0;n<t.length&&!e(t[n],n,t);n++);return t}function r(t,e){for(var n=t.length,r=0;n>r&&t[r]!==e;r++);return n>r?r:-1}function o(t,e){return t.replace(/{(\d+)}/g,function(t,n){return null!=e[n]?e[n]:""})}function i(t){var e=/^[$A-Z_][0-9A-Z_$]*/i,n=t.match(e);return n&&0===n.index?n[0]:void 0}function a(t){for(var e="!=<>/&|*%-^?+\\",n=0;e.indexOf(t.charAt(n)||null)>=0&&++n;);if(n>0)return t.slice(0,n);var r=i(t);return null!=r?r:void 0}function s(t,e){return function(n){return n=i(n),n===e?new t(n,n.length):void 0}}function c(){}function u(){}function f(){}function p(){}function l(t,e,n){this.result=t,this.sourcePathInfo=new x,this.sourcePathInfo.path=e,this.sourcePathInfo.drillTo(n)}function h(){}function d(){}function v(){}function g(){}function y(){}function m(){}function w(){}function b(){}function x(t,e,n){var r;n&&e&&(this.subPaths="object"==typeof e&&new e.constructor),t&&(r=t.sourcePathInfo,t instanceof k&&t.path&&(originPath=t.original,this.original=e)),this.innerPathInfo=r,this.original=r&&r.original||e,this.path=r&&r.path}function _(t,e,n,r,o){o?t.push(e):t[n]=e,r.pushSubPath(n)}function P(t,e){var n=e.get(0),r=new x(e.getRaw(0),n,!0),o=n&&"object"==typeof n&&new n.constructor,i=e.get(1);if(!o)return void 0;var a,s=Array.isArray(n);for(var c in n)s&&isNaN(c)||(a=n[c],"function"==typeof i?t.callWith(i,[a])&&_(o,a,c,r,s):a===i&&_(o,a,c,r,s));return e.callee.sourcePathInfo=r,o}var A=t("lang-js"),j=t("gedi-paths"),T=A.createNestingParser,k=(A.detectString,A.Token),N=A.Scope,O=t("spec-js");c=O(c,k),c.prototype.precedence=2,c.prototype.stringTerminal='"',c.prototype.name="StringToken",c.tokenise=function(t){if(t.charAt(0)===this.prototype.stringTerminal){for(var e=0,n=0;t.charAt(++e)!==this.prototype.stringTerminal;){if(e>=t.length)throw"Unclosed "+this.name;"\\"===t.charAt(e)&&t.charAt(e+1)===this.prototype.stringTerminal&&(t=t.slice(0,e)+t.slice(e+1),n++)}return new this(t.slice(0,e+1),e+n+1)}},c.prototype.evaluate=function(){this.result=this.original.slice(1,-1)},u=O(u,c),u.prototype.stringTerminal="'",u.prototype.name="String2Token",u.tokenise=c.tokenise,f=O(f,k),f.prototype.name="ParenthesesToken",f.tokenise=function(t){return"("===t.charAt(0)||")"===t.charAt(0)?new f(t.charAt(0),1):void 0},f.prototype.parse=T(/^\($/,/^\)$/),f.prototype.evaluate=function(t){t=new N(t);var e=this.childTokens[0];if(!e)throw"Invalid function call. No function was provided to execute.";if(e.evaluate(t),"function"!=typeof e.result)throw e.original+" ("+e.result+") is not a function";this.result=t.callWith(e.result,this.childTokens.slice(1),this)},p=O(p,k),p.prototype.name="NumberToken",p.tokenise=function(t){var e={NaN:Number.NaN,"-NaN":-Number.NaN,Infinity:1/0,"-Infinity":-1/0};for(var n in e)if(t.slice(0,n.length)===n)return new p(n,n.length);for(var r="0123456789-.Eex",o=0;r.indexOf(t.charAt(o)||null)>=0&&++o;);if(o>0){var i=t.slice(0,o);if(isNaN(parseFloat(i)))return;return new p(i,o)}},p.prototype.evaluate=function(){this.result=parseFloat(this.original)},l=O(l,k),l.prototype.name="ValueToken",l.prototype.evaluate=function(){},l.prototype.precedence=2,h=O(h,k),h.prototype.name="NullToken",h.prototype.precedence=2,h.tokenise=s(h,"null"),h.prototype.evaluate=function(){this.result=null},d=O(d,k),d.prototype.name="UndefinedToken",d.prototype.precedence=2,d.tokenise=s(d,"undefined"),d.prototype.evaluate=function(){this.result=void 0},v=O(v,k),v.prototype.name="TrueToken",v.prototype.precedence=2,v.tokenise=s(v,"true"),v.prototype.evaluate=function(){this.result=!0},g=O(g,k),g.prototype.name="FalseToken",g.prototype.precedence=2,g.tokenise=s(g,"false"),g.prototype.evaluate=function(){this.result=!1},y=O(y,k),y.prototype.name="DelimiterToken",y.prototype.precedence=2,y.tokenise=function(t){for(var e=0;e<t.length&&""===t.charAt(e).trim()||","===t.charAt(e);)e++;return e?new y(t.slice(0,e),e):void 0},y.prototype.parse=function(t,e){t.splice(e,1)},m=O(m,k),m.prototype.name="IdentifierToken",m.prototype.precedence=3,m.tokenise=function(t){var e=a(t);return null!=e?new m(e,e.length):void 0},m.prototype.evaluate=function(t){var e=t.get(this.original);e instanceof k?(this.result=e.result,this.sourcePathInfo=e.sourcePathInfo):this.result=e},w=O(w,k),w.prototype.name="PeriodToken",w.prototype.precedence=1,w.tokenise=function(t){var e=".";return t.charAt(0)===e?new w(e,1):void 0},w.prototype.parse=function(t,e){this.targetToken=t.splice(e-1,1)[0],this.identifierToken=t.splice(e,1)[0]},w.prototype.evaluate=function(t){this.targetToken.evaluate(t),this.result=this.targetToken.result&&("object"==typeof this.targetToken.result||"function"==typeof this.targetToken.result)&&this.targetToken.result.hasOwnProperty(this.identifierToken.original)?this.targetToken.result[this.identifierToken.original]:void 0;var e;this.targetToken.sourcePathInfo&&(e=this.targetToken.sourcePathInfo.path),e&&(this.sourcePathInfo={path:j.append(e,j.create(this.identifierToken.original))})},b=O(b,k),b.prototype.name="FunctionToken",b.tokenise=function(t){return"{"===t.charAt(0)||"}"===t.charAt(0)?new b(t.charAt(0),1):void 0},b.prototype.parse=T(/^\{$/,/^\}$/),b.prototype.evaluate=function(){var t=this.childTokens.slice(),e=t.pop();this.result=function(n,r){n=new N(n);for(var o=0;o<t.length;o++){var i=r.getRaw(o,!0);n.set(t[o].original,i)}return e.evaluate(n),r.callee&&(r.callee.sourcePathInfo=e.sourcePathInfo),e.result}},x.prototype.setSubPath=function(t,e){this.subPaths&&(this.subPaths[t]=this.innerPathInfo&&this.innerPathInfo.subPaths&&this.innerPathInfo.subPaths[e]||j.append(this.path,j.create(e)))},x.prototype.pushSubPath=function(t){this.subPaths&&this.setSubPath(this.subPaths.length,t)},x.prototype.setSubPaths=function(t){this.subPaths&&(this.subPaths=t)},x.prototype.drillTo=function(t){this.subPaths&&(this.path=this.subPaths[t]),this.path&&(this.path=j.append(this.path,j.create(t)))};var E=[c,u,f,p,h,d,v,g,y,m,w,b],S={toString:function(t,e){return""+e.next()},"+":function(t,e){return e.next()+e.next()},"-":function(t,e){return e.next()-e.next()},"/":function(t,e){return e.next()/e.next()},"*":function(t,e){return e.next()*e.next()},isNaN:function(t,e){return isNaN(e.get(0))},max:function(t,e){for(var n=e.next();e.hasNext();)n=Math.max(n,e.next());return n},min:function(t,e){for(var n=e.next();e.hasNext();)n=Math.min(n,e.next());return n},">":function(t,e){return e.next()>e.next()},"<":function(t,e){return e.next()<e.next()},">=":function(t,e){return e.next()>=e.next()},"<=":function(t,e){return e.next()<=e.next()},"?":function(t,e){var n,r;return e.next()?(n=e.get(1),r=e.getRaw(1)):(n=e.get(2),r=e.getRaw(2)),e.callee.sourcePathInfo=r&&r.sourcePathInfo,n},"!":function(t,e){return!e.next()},"=":function(t,e){return e.next()==e.next()},"==":function(t,e){return e.next()===e.next()},"!=":function(t,e){return e.next()!=e.next()},"!==":function(t,e){return e.next()!==e.next()},"||":function(t,e){for(var n,r,o=-1;e.hasNext()&&(o++,!(n=e.next())););return r=e.getRaw(o),e.callee.sourcePathInfo=r&&r.sourcePathInfo,n},"|":function(t,e){for(var n,r,o=-1;e.hasNext()&&(o++,n=e.next(),n!==!0););return r=e.getRaw(o),e.callee.sourcePathInfo=r&&r.sourcePathInfo,n},"&&":function(t,e){for(var n;e.hasNext()&&(n=e.next()););var r=e.getRaw(e.length-1);return e.callee.sourcePathInfo=r&&r.sourcePathInfo,n},object:function(t,e){for(var n={};e.hasNext();)n[e.next()]=e.next();return n},keys:function(t,e){var n=e.next();return"object"==typeof n?Object.keys(n):void 0},values:function(t,e){var n=e.next(),r=[];for(var o in n)r.push(n[o]);return r},invert:function(t,e){var n=e.next(),r={};for(var o in n)r[n[o]]=o;return r},extend:function(t,e){for(var n={};e.hasNext();){var r=e.next();for(var o in r)n[o]=r[o]}return n},array:function(t,e){for(var n=[];e.hasNext();)n.push(e.next());return n},map:function(t,e){var r=e.next(),o=new x(e.getRaw(0),r,!0),i=Array.isArray(r),a=i?[]:{},s=e.next();if(i)n(r,function(e,n){var r={};a[n]=t.callWith(s,[new l(e,o.path,n)],r),r.sourcePathInfo&&(o.subPaths[n]=r.sourcePathInfo.path)});else for(var c in r){var u={};a[c]=t.callWith(s,[new l(r[c],o.path,c)],u),u.sourcePathInfo&&(o.subPaths[c]=u.sourcePathInfo.path)}return e.callee.sourcePathInfo=o,a},pairs:function(t,e){var n=e.next(),r=[];for(var o in n)n.hasOwnProperty(o)&&r.push([o,n[o]]);return r},flatten:function(t,e){function n(t){for(var e,r=[],i=0;i<t.length;i++){e=t[i];for(var a=0;a<e.length;a++)r.push(!o&&Array.isArray(e[a])?n(e):t[i][a])}return r}var r=e.next(),o=e.hasNext()&&e.next();return n(r)},sort:function(t,e){var n,o=e.next(),i=new x(e.getRaw(0),o,!0),a=e.next(),s=this;if(Array.isArray(o)){if(!i.path)return o.slice().sort(function(e,n){return t.callWith(a,[e,n],s)});for(var c=0;c<o.length;c++)i.setSubPath(c,c);n=[],sortedPaths=i.subPaths.slice(),sortedPaths.sort(function(e,n){var c=o[r(i.subPaths,e)],u=o[r(i.subPaths,n)];return t.callWith(a,[c,u],s)});for(var c=0;c<sortedPaths.length;c++)n[j.toParts(sortedPaths[c]).pop()]=o[c];return i.setSubPaths(sortedPaths),e.callee.sourcePathInfo=i,n}},filter:P,findOne:function(t,e){var r,o=e.next(),i=e.next(),a=new x(e.getRaw(0),o),s=this;return Array.isArray(o)?(n(o,function(n,o){return t.callWith(i,[n],s)?(r=n,a.drillTo(o),e.callee.sourcePathInfo=a,!0):void 0}),r):void 0},concat:function(t,e){var n=e.next(),r=0,o=new x,i=Array.isArray(n)&&[],a=function(){if(i){var t=e.getRaw(r++),n=t&&t.sourcePathInfo;if(n)if(Array.isArray(n.subPaths))i=i.concat(n.subPaths);else for(var o=0;o<t.result.length;o++)i.push(j.append(n.path,j.create(o)))}};for(a();e.hasNext();){if(null==n||!n.concat)return void 0;var s=e.next();Array.isArray(s)&&(n=n.concat(s)),a()}return o.subPaths=i,e.callee.sourcePathInfo=o,n},join:function(t,e){return e=e.all(),e.slice(1).join(e[0])},slice:function(t,e){var n,r,o,i=0,a=e.next();if(e.hasNext()&&(n=a,a=e.next(),i++),e.hasNext()&&(r=a,a=e.next(),i++),a&&a.slice){a=a.slice(),o=new x(e.getRaw(i),a,!0);var s=a.slice(n,r);return o.setSubPaths(o.innerPathInfo&&o.innerPathInfo.subPaths&&o.innerPathInfo.subPaths.slice(n,r)),e.callee.sourcePathInfo=o,s}},split:function(t,e){var n=e.next();return n?n.split(e.hasNext()&&e.next()):void 0},last:function(t,e){var n=e.next(),r=new x(e.getRaw(0),n);return r.drillTo(n.length-1),e.callee.sourcePathInfo=r,Array.isArray(n)?n[n.length-1]:void 0},first:function(t,e){var n=e.next(),r=new x(e.getRaw(0),n);return r.drillTo(0),e.callee.sourcePathInfo=r,Array.isArray(n)?n[0]:void 0},length:function(t,e){var n=e.next();return null!=n?n.length:void 0},getValue:function(t,e){var n=e.next(),r=e.next(),o=new x(e.getRaw(0),n);return o.drillTo(r),e.callee.sourcePathInfo=o,n&&"object"==typeof n?n[r]:void 0},compare:function(t,e){for(var n,e=e.all(),r=e.pop(),o=e.pop(),i=!0;e.length;){n=e.pop();for(var a in n)t.callWith(r,[n[a],o[a]],this)||(i=!1)}return i},contains:function(t,e){var r,e=e.all(),o=e.shift(),i=!1,a=!1;if(null!=o&&("boolean"==typeof o&&(a=o,o=e.shift()),r=e.pop(),null!=o&&o.indexOf)){if("string"!=typeof r||a)return o.indexOf(r)>=0;if(r=r.toLowerCase(),Array.isArray(o))n(o,function(t){return"string"==typeof t&&t.toLowerCase()===r.toLowerCase()?i=!0:void 0});else if("string"==typeof o&&o.toLowerCase().indexOf(r)>=0)return i=!0;return i}},charAt:function(t,e){var n,r=e.next();return e.hasNext()&&(n=e.next()),"string"==typeof r?r.charAt(n):void 0},toLowerCase:function(t,e){var n=e.next();return"string"!=typeof n?void 0:n.toLowerCase()},toUpperCase:function(t,e){var n=e.next();return"string"!=typeof n?void 0:n.toUpperCase()},format:function(t,e){var e=e.all();if(e[0])return o(e.shift(),e)},refine:function(t,e){for(var e=e.all(),n="boolean"==typeof e[0]&&e.shift(),r=e.shift(),o={},i=0;i<e.length;i++)e[i]=e[i].toString();for(var a in r)e.indexOf(a)>=0?!n&&(o[a]=r[a]):n&&(o[a]=r[a]);return o},date:function(){var t=function(t,e){return e.length?new Date(e.length>1?e.all():e.next()):new Date};return t.addDays=function(t,e){var n=e.next();return new Date(n.setDate(n.getDate()+e.next()))},t}(),toJSON:function(t,e){return JSON.stringify(e.next())
},fromJSON:function(t,e){return JSON.parse(e.next())},fold:function(t,e){var e=e.all(),n=e.pop(),r=e.pop(),o=e[0],i=r;if(e.length>1&&(o=e),!o||!o.length)return i;for(var a=0;a<o.length;a++)i=t.callWith(n,[i,o[a]],this);return i},partial:function(t,e){var n=e.all(),r=n.shift(),o=this;return function(t,e){var i=e.all();return t.callWith(r,n.concat(i),o)}},flip:function(t,e){var n=e.all().reverse(),r=n.pop(),o=this;return function(t){return t.callWith(r,n,o)}},compose:function(t,e){var n=e.all().reverse(),r=this;return function(t,e){for(var o=t.callWith(n[0],e.all(),r),i=1;i<n.length;i++)o=t.callWith(n[i],[o],r);return o}},apply:function(t,e){var n=e.next();return outerArgs=e.next(),t.callWith(n,outerArgs,this)},zip:function(t,e){for(var n=e.all(),r=[],o=0,i=0;i<n.length;i++)Array.isArray(n[i])?o=Math.max(o,n[i].length):(n.splice(i,1),i--);for(var a=0;o>a;a++)for(var i=0;i<n.length;i++)n[i].length>=a&&r.push(n[i][a]);return r}};Gel=function(){var t={},e=new A;return t.lang=e,t.tokenise=function(e){return t.lang.tokenise(e,this.tokenConverters)},t.evaluate=function(t,n,r){var o=new N;return o.add(this.scope).add(n),e.evaluate(t,o,this.tokenConverters,r)},t.tokenConverters=E.slice(),t.scope=Object.create(S),t},Gel.Token=k,Gel.Scope=N,e.exports=Gel},{"gedi-paths":40,"lang-js":42,"spec-js":46}],42:[function(t,e){function n(t,e){for(var n=0;n<t.length&&!e(t[n],n,t);n++);return t}function r(t,e,r){var o=0,i=this,a={callee:r,length:e.length,raw:function(t){var r=e.slice();return t&&n(r,function(t){t instanceof h&&t.evaluate(i)}),r},getRaw:function(t,n){var r=e[t];return n&&r instanceof h&&r.evaluate(i),r},get:function(t){var n=e[t];return n instanceof h?(n.evaluate(i),n.result):n},hasNext:function(){return o<e.length},next:function(){if(!this.hasNext())throw"Incorrect number of arguments";return e[o]instanceof h?(e[o].evaluate(i),e[o++].result):e[o++]},all:function(){for(var t=[];this.hasNext();)t.push(this.next());return t}};return t(i,a)}function o(t){this.__scope__={},this.__outerScope__=t}function i(t,e){return function(n,r){if(!this.original.match(t))throw"Invalid nesting. No opening token was found matching "+t.toString();for(var o=r,i=1;o++,o<=n.length&&i;){if(!n[o])throw"Invalid nesting. No closing token was found matching "+e.toString();n[o].original.match(t)&&i++,n[o].original.match(e)&&i--}var a=n.splice(r+1,o-1-r);a.pop(),this.childTokens=u(a)}}function a(t,e){for(var n=0;n<t.length;n++){var r=t[n].tokenise(e);if(r)return r}}function s(t){return t.slice().sort(function(e,n){var r=e.precedence-n.precedence;return r?r:t.indexOf(e)-t.indexOf(n)})}function c(t,e,n){if(!t)return[];if(n&&n[t])return n[t].slice();e=s(e);var r,o=t,i=[],c=0;do{r=t.length;var u;if(u=a(e,t))t=t.slice(u.length),c+=u.length,i.push(u);else if(t.length===r)throw"Unable to determine next token in expression: "+t}while(t);return n&&(n[o]=i.slice()),i}function u(t){for(var e=s(t),n=e[0],r=0;n&&1==n.parsed;)n=e[r++];return n?(n.parse&&n.parse(t,t.indexOf(n)),n.parsed=!0,u(t)):t}function f(t,e){e=e||new o;for(var n=0;n<t.length;n++){var r=t[n];r.evaluate(e)}return t}function p(t){var e=[];for(var n in t)e.push({expression:n,time:t[n].time,calls:t[n].calls,averageTime:t[n].averageTime});e.sort(function(t,e){return e.time-t.time}).slice(0,10).forEach(function(t){console.log(["Expression: ",t.expression,"\n","Average evaluation time: ",t.averageTime,"\n","Total time: ",t.time,"\n","Call count: ",t.calls].join(""))})}function l(){function t(t){var e=a[t.expression]=a[t.expression]||{time:0,calls:0};e.time+=t.time,e.calls++,e.averageTime=e.time/e.calls}var e={},n={},i={},a={};return e.printTopExpressions=function(){p(a)},e.parse=u,e.tokenise=function(t,e){return c(t,e,n)},e.evaluate=function(e,r,a,s){var c,u,p,l=this,h=e;if(!(r instanceof o)){var d=r;r=new o,r.add(d)}if(Array.isArray(e))return f(e,r).slice(-1).pop();i[h]?c=i[h].slice():(c=l.parse(l.tokenise(e,a,n)),i[h]=c);var v=new Date;return u=f(c,r),t({expression:e,time:new Date-v}),s?u.slice():(p=u.slice(-1).pop(),p&&p.result)},e.callWith=r,e}var h=t("./src/token");o.prototype.get=function(t){for(var e=this;e&&!e.__scope__.hasOwnProperty(t);)e=e.__outerScope__;return e&&e.__scope__[t]},o.prototype.set=function(t,e,n){if(n){for(var r=this;r&&!(t in r.__scope__);)r=r.__outerScope__;r&&r.set(t,e)}return this.__scope__[t]=e,this},o.prototype.add=function(t){for(var e in t)this.__scope__[e]=t[e];return this},o.prototype.isDefined=function(t){return t in this.__scope__?!0:this.__outerScope__&&this.__outerScope__.isDefined(t)||!1},o.prototype.callWith=r,l.createNestingParser=i,l.Scope=o,l.Token=h,e.exports=l},{"./src/token":43}],43:[function(t,e){function n(t,e){this.original=t,this.length=e}n.prototype.name="token",n.prototype.precedence=0,n.prototype.valueOf=function(){return this.result},e.exports=n},{}],44:[function(t,e){!function(){"use strict";function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}function n(t){return!(t.substr(0,h.length)==h&&"___"===t.substr(t.length-3))}function r(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[d];return e&&e.key===t?e:l(t)?(e={key:t},p(t,d,{value:e,writable:!1,enumerable:!1,configurable:!1}),e):void 0}function o(t){return t.prototype=null,Object.freeze(t)}function i(){m||"undefined"==typeof console||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var a=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var c=new s,u=Object.freeze({});if(c.set(u,1),1===c.get(u))return void(e.exports=WeakMap);a=!0}}var f=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),p=Object.defineProperty,l=Object.isExtensible,h="weakmap:",d=h+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),g=new Uint8Array(v);crypto.getRandomValues(g),d=h+"rand:"+Array.prototype.map.call(g,function(t){return(t%36).toString(36)}).join("")+"___"}if(p(Object,"getOwnPropertyNames",{value:function(t){return f(t).filter(n)}}),"getPropertyNames"in Object){var y=Object.getPropertyNames;p(Object,"getPropertyNames",{value:function(t){return y(t).filter(n)}})}!function(){var t=Object.freeze;p(Object,"freeze",{value:function(e){return r(e),t(e)}});var e=Object.seal;p(Object,"seal",{value:function(t){return r(t),e(t)}});var n=Object.preventExtensions;p(Object,"preventExtensions",{value:function(t){return r(t),n(t)}})}();var m=!1,w=0,b=function(){function t(t,e){var n,o=r(t);return o?u in o?o[u]:e:(n=s.indexOf(t),n>=0?c[n]:e)}function e(t){var e=r(t);return e?u in e:s.indexOf(t)>=0}function n(t,e){var n,o=r(t);return o?o[u]=e:(n=s.indexOf(t),n>=0?c[n]=e:(n=s.length,c[n]=e,s[n]=t)),this}function a(t){var e,n,o=r(t);return o?u in o&&delete o[u]:(e=s.indexOf(t),0>e?!1:(n=s.length-1,s[e]=void 0,c[e]=c[n],s[e]=s[n],s.length=n,c.length=n,!0))}this instanceof b||i();var s=[],c=[],u=w++;return Object.create(b.prototype,{get___:{value:o(t)},has___:{value:o(e)},set___:{value:o(n)},delete___:{value:o(a)}})};b.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},"delete":{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof s?!function(){function n(){function e(t,e){return f?u.has(t)?u.get(t):f.get___(t,e):u.get(t,e)}function n(t){return u.has(t)||(f?f.has___(t):!1)}function r(t){var e=!!u["delete"](t);return f?f.delete___(t)||e:e}this instanceof b||i();var c,u=new s,f=void 0,p=!1;return c=a?function(t,e){return u.set(t,e),u.has(t)||(f||(f=new b),f.set(t,e)),this}:function(t,e){if(p)try{u.set(t,e)}catch(n){f||(f=new b),f.set___(t,e)}else u.set(t,e);return this},Object.create(b.prototype,{get___:{value:o(e)},has___:{value:o(n)},set___:{value:o(c)},delete___:{value:o(r)},permitHostObjects___:{value:o(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");p=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=b.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=b)}}()},{}],45:[function(t,e){var n=t("lang-js"),r=n.Token,o=t("gedi-paths"),i=t("spec-js"),a=t("gedi-paths/detectPath");e.exports=function(t,e){function n(){}return n=i(n,r),n.prototype.name="PathToken",n.prototype.precedence=4,n.tokenise=function(t){var e=a(t);return e?new n(e,e.length):void 0},n.prototype.evaluate=function(n){this.path=this.original,this.result=t(o.resolve(n.get("_gmc_"),this.original),e),this.sourcePathInfo={path:this.original}},n}},{"gedi-paths":40,"gedi-paths/detectPath":39,"lang-js":42,"spec-js":46}],46:[function(t,e){function n(t,e){var n;e||(e=Object),e.prototype||(e.prototype={}),n=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.__super__=n,t.__super__=e;var r=new Function("child","return function "+t.name+"(){child.__super__.apply(this, arguments);return child.apply(this, arguments);}")(t);return r.prototype=t.prototype,r.prototype.constructor=t.prototype.constructor=r,r.__super__=e,r}Object.create=Object.create||function(t){function e(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return e.prototype=t,new e},e.exports=n},{}],47:[function(t,e){for(var n="undefined"!=typeof window?window:this,r=0,o=["webkit","moz"],i=n.requestAnimationFrame,a=n.cancelAnimationFrame,s=o.length;--s>=0&&!i;)i=n[o[s]+"RequestAnimationFrame"],a=n[o[s]+"CancelAnimationFrame"];i&&a||(i=function(t){var e=+Date.now(),n=Math.max(r+16,e);return setTimeout(function(){t(r=n)},n-e)},a=clearTimeout),a||(n.cancelAnimationFrame=function(t){clearTimeout(t)}),n.requestAnimationFrame=i,n.cancelAnimationFrame=a,e.exports={requestAnimationFrame:i,cancelAnimationFrame:a}},{}],48:[function(t,e){function n(){}function r(t,e){var n=Array.isArray(e);for(var r in e)if(!(n&&isNaN(r)||e[r]!==t))return r}var o=t("gaffa"),i=t("spec-js");n=i(n,o.Property),n.prototype.trackKeys=!0,n.prototype.sameAsPrevious=function(){var t=this.getPreviousHash(),e=this.value,n=e&&(this._sourcePathInfo&&this._sourcePathInfo.subPaths||"object"==typeof e&&Object.keys(e));if(this.setPreviousHash(n||e),n&&t&&t.length){if(t.length!==n.length)return;for(var r=0;r<n.length;r++)if(n[r]!==t[r])return;return!0}return e===t},n.prototype.update=function(t,e){if(this.template){this._templateCache=this._templateCache||this.template&&JSON.stringify(this.template),this._emptyTemplateCache=this._emptyTemplateCache||this.emptyTemplate&&JSON.stringify(this.emptyTemplate);var n=this.gaffa,o=n.gedi.paths,i=this.viewsName,a=t.views[i],s=this._sourcePathInfo,c=(a.slice(),!0);if(a.abortDeferredAdd(),e&&"object"==typeof e&&s){if(!s.subPaths){s.subPaths=new e.constructor;for(var u in e)Array.isArray(e)&&isNaN(u)||(s.subPaths[u]=o.append(s.path,o.create(u)))}for(var f,p=0,l=0;l<a.length;l++){var h=a[l].sourcePath;r(h,s.subPaths)||a[l].containerName===i&&(a[l].remove(),l--)}for(var u in s.subPaths)if(!Array.isArray(s.subPaths)||!isNaN(u)){c=!1;for(var d=s.subPaths[u],v=null,g=null,l=0;l<a.length;l++){var y=a[l];if(y.sourcePath===d){v=y,g=l;break}}v?p!==g&&a.deferredAdd(v,p):(f=JSON.parse(this._templateCache),f.sourcePath=d,f.containerName=i,a.deferredAdd(f,p)),p++}}if(c){for(var l=0;l<a.length;l++)a[l].containerName===i&&(a[l].remove(),l--);this._emptyTemplateCache&&(f=n.initialiseViewItem(JSON.parse(this._emptyTemplateCache),this.gaffa,this.gaffa.views.constructors),f.containerName=i,a.add(f,p))}}},e.exports=n},{gaffa:31,"spec-js":46}],49:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel"),i="anchor";n=r.createSpec(n,r.ContainerView),n.prototype.type=i,n.prototype.render=function(){var t=document.createTextNode(""),e=o("a",t),n=this;this.views.content.element=e,this.renderedElement=e,this.text.textNode=t,this.external||(e.onclick=function(t){1===t.which&&t.preventDefault()},this.gaffa.events.on("click",e,function(t){1===t.which&&n.gaffa.navigate(n.href.value,n.target.value)}))},n.prototype.text=new r.Property(function(t,e){this.textNode.textContent=null!==e&&void 0!==e?e:""}),n.prototype.target=new r.Property(function(t,e){"string"==typeof e?t.renderedElement.setAttribute("target",e):t.renderedElement.removeAttribute("target")}),n.prototype.href=new r.Property(function(t,e){null!==e&&void 0!==e?t.renderedElement.setAttribute("href",e):t.renderedElement.removeAttribute("href")}),e.exports=n},{crel:32,gaffa:31}],50:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel"),i="button";n=r.createSpec(n,r.ContainerView),n.prototype.type=i,n.prototype.render=function(){var t=document.createTextNode(""),e=o("button",t);this.views.content.element=e,this.text.textNode=t,this.renderedElement=e},n.prototype.text=new r.Property(function(t,e){this.textNode.textContent=null!==e&&void 0!==e?e:""}),n.prototype.subType=new r.Property(function(t,e){t.renderedElement.setAttribute("type",e||"button")}),n.prototype.disabled=new r.Property(function(t,e){e?t.renderedElement.setAttribute("disabled","disabled"):t.renderedElement.removeAttribute("disabled")}),e.exports=n},{crel:32,gaffa:31}],51:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel");n=r.createSpec(n,r.ContainerView),n.prototype.type="checkbox",n.prototype.render=function(){var t,e,n=this,r=o("span",t=o("label"),e=o("input",{type:"checkbox"}));this.checkboxInput=e,this.checkboxLabel=t,e.addEventListener(this.updateEventName||"change",function(){n.checked.set(this.checked)}),t.addEventListener("click",function(){e.click()}),r.appendChild(e),r.appendChild(t),this.views.content.element=t,this.renderedElement=r},n.prototype.checked=new r.Property(function(t,e){t.checkboxInput.checked=e}),n.prototype.text=new r.Property(function(t,e){t.checkboxLabel.textContent=e&&"string"==typeof e?e:null}),n.prototype.showLabel=new r.Property(function(t,e){t.checkboxLabel.style.display=e===!1?"none":null}),e.exports=n},{crel:32,gaffa:31}],52:[function(t,e){function n(){}var r=t("gaffa");n=r.createSpec(n,r.ContainerView),n.prototype.type="container",n.prototype.render=function(){this.views.content.element=this.renderedElement=document.createElement(this.tagName||"div")},e.exports=n},{gaffa:31}],53:[function(t,e){function n(){}var r=t("gaffa"),o="form",i=t("crel");n=r.createSpec(n,r.ContainerView),n.prototype.type=o,n.prototype.render=function(){var t=this,e=i("form");this.action?e.setAttribute("action",this.action):e.addEventListener("submit",function(e){t.actions.submit&&e.preventDefault()}),this.method&&e.setAttribute("method",this.method),this.views.content.element=e,this.renderedElement=e},e.exports=n},{crel:32,gaffa:31}],54:[function(t,e){function n(){this.views.groups=new o.ViewContainer(this.views.groups),this.views.empty=new o.ViewContainer(this.views.empty)}function r(t,e,n){t.templateCache||(t.templateCache={});var r=JSON.parse(t.templateCache[e]||(t.templateCache[e]=JSON.stringify(t[e])));for(var o in n)r[o]=n[o];return t.gaffa.initialiseViewItem(r,t.gaffa,t.gaffa.views.constructors)}var o=t("gaffa"),i=t("crel"),a="group";n=o.createSpec(n,o.ContainerView),n.prototype.type=a,n.prototype.render=function(){var t=i("div");this.views.groups.element=t,this.views.empty.element=t,this.renderedElement=t},n.prototype.groups=new o.Property({update:o.propertyUpdaters.group("groups",function(t,e,n){var o,i,a=t.views.groups,s=t.groups,c=r(s,"groupTemplate");for(var u in n)c[u]=n[u];s.listTemplate&&(o="({items "+s.listTemplate.list.binding+"}(filter [] {item (= ("+s.expression+' item) "'+n.group+'")}))',i=r(s,"listTemplate",n),i.list.binding=o,c.views.content.add(i)),a.add(c)},function(t,e,n){n.remove()},function(t,e){var n=t.views.empty,o=t.groups;if(o.emptyTemplate)if(e)n.length||n.add(r(o,"emptyTemplate"));else for(;n.length;)n[0].remove()}),trackKeys:!0}),e.exports=n},{crel:32,gaffa:31}],55:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel"),i="heading";n=r.createSpec(n,r.View),n.prototype.type=i,n.prototype.render=function(){var t=document.createTextNode(""),e=o("h"+(parseInt(this.level)||1),t);this.renderedElement=e,this.text.textNode=t},n.prototype.text=new r.Property(function(t,e){this.textNode.textContent=null!==e&&void 0!==e?e:""}),e.exports=n},{crel:32,gaffa:31}],56:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel"),i="html";n=r.createSpec(n,r.View),n.prototype.type=i,n.prototype.render=function(){var t=o("span");this.renderedElement=t},n.prototype.html=new r.Property(function(t,e){t.renderedElement.innerHTML="string"==typeof e||"number"==typeof e?e:null}),e.exports=n},{crel:32,gaffa:31}],57:[function(t,e){function n(t,e){var n=new window.FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}function r(){}var o=t("gaffa"),i="image",a=t("crel");r=o.createSpec(r,o.View),r.prototype.type=i,r.prototype.render=function(){var t=a("img");this.renderedElement=t},r.prototype.source=new o.Property(function(t,e){t.renderedElement[e?"setAttribute":"removeAttribute"]("src",e)}),r.prototype.image=new o.Property(function(t,e){e&&("string"==typeof e?t.renderedElement.setAttribute("src",e):n(e,function(e){t.renderedElement.setAttribute("src",e)}))}),e.exports=r},{crel:32,gaffa:31}],58:[function(t,e){"use strict";function n(){}var r=t("gaffa"),o=t("crel"),i="label";n=r.createSpec(n,r.View),n.prototype.type=i,n.prototype.render=function(){var t=document.createTextNode(""),e=o(this.tagName||"label",t);this.renderedElement=e,this.text.textNode=t},n.prototype.text=new r.Property(function(t,e){this.textNode.textContent=null!==e&&void 0!==e?e:""}),n.prototype.labelFor=new r.Property(function(t,e){null===e||void 0===e?t.renderedElement.removeAttribute("labelFor"):t.renderedElement.setAttribute("labelFor",e)}),e.exports=n},{crel:32,gaffa:31}],59:[function(t,e){function n(){this.views.list=new r.ViewContainer(this.views.list),this.views.empty=new r.ViewContainer(this.views.empty)}var r=t("gaffa"),o=t("crel"),i=t("gaffa/src/templaterProperty"),a="list";n=r.createSpec(n,r.ContainerView),n.prototype.type=a,n.prototype.render=function(){var t=o(this.tagName||"div");this.views.list.element=t,this.views.empty.element=t,this.renderedElement=t},n.prototype.list=new i({viewsName:"list"}),e.exports=n},{crel:32,gaffa:31,"gaffa/src/templaterProperty":48}],60:[function(t,e){function n(){}function r(t,e,n){t.templateCache||(t.templateCache={});var r=JSON.parse(t.templateCache[n]||(t.templateCache[n]=JSON.stringify(e)));return t.gaffa.initialiseViewItem(r,t.gaffa,t.gaffa.views.constructors)}var o=t("gaffa"),i=t("crel"),a="switchContainer";n=o.createSpec(n,o.ContainerView),n.prototype.type=a,n.prototype.render=function(){var t=i(this.tagName||"div");this.views.content.element=t,this.renderedElement=t},n.prototype.content=new o.Property(function(t,e){for(var n,o=t.views.content;o.length;)o[0].remove();return(n=this.templates&&this.templates[e]||this.emptyTemplate)?void o.add(r(this,n,"templates-"+e)):void(this.emptyTemplate&&o.add(r(this,this.emptyTemplate,"emptyTemplate")))}),e.exports=n},{crel:32,gaffa:31}],61:[function(t,e){function n(){}var r=t("gaffa"),o=(t("crel"),"text");n=r.createSpec(n,r.View),n.prototype.type=o,n.prototype.render=function(){this.renderedElement=document.createTextNode("")},n.prototype.text=new r.Property(function(t,e){t.renderedElement.data=e||""}),n.prototype.visible=new r.Property(function(t,e){t.renderedElement.data=e===!1?"":t.text.value||""}),n.prototype.title=void 0,n.prototype.enabled=void 0,n.prototype.classes=void 0,e.exports=n},{crel:32,gaffa:31}],62:[function(t,e){function n(){}var r=t("gaffa"),o=t("crel"),i=t("doc-js"),a="textarea";n=r.createSpec(n,r.View),n.prototype.type=a,n.prototype.render=function(){var t=this,e=o("textarea");i.on(this.updateEventName||"change",e,function(){t.value.set(e.value)}),this.renderedElement=e},n.prototype.value=new r.Property(function(t,e){t.renderedElement.value=e||""}),n.prototype.placeholder=new r.Property(function(t,e){t.renderedElement[e?"setAttribute":"removeAttribute"]("placeholder",e)}),n.prototype.disabled=new r.Property(function(t,e){t.renderedElement[e?"setAttribute":"removeAttribute"]("disabled",e)}),e.exports=n},{crel:32,"doc-js":34,gaffa:31}],63:[function(t,e){function n(t){var e=t.target,n=e.viewModel;n.value.set("number"===n.subType.value?parseFloat(e.value):e.value)}function r(t,e){e=e||"";var n=t.renderedElement,r=0,o=n===document.activeElement;if(e!==n.value){if(o)if(window.document.selection){var i=window.document.selection.createRange();i.moveStart("character",-n.value.length),r=i.text.length}else(n.selectionStart||"0"==n.selectionStart)&&(r=n.selectionStart);if(n.value=e,o){if(n.createTextRange){var a=n.createTextRange();a.move("character",r),a.select()}n.selectionStart&&n.setSelectionRange(r,r)}}}function o(t,e){t.renderedElement.setAttribute("type",null!=e?e:"")}function i(t,e){t.renderedElement.setAttribute("placeholder",null!=e?e:"")}function a(t,e){e?t.renderedElement.setAttribute("disabled","disabled"):t.renderedElement.removeAttribute("disabled")}function s(t,e){e?t.renderedElement.setAttribute("required","required"):t.renderedElement.removeAttribute("required")}function c(){}{var u=t("gaffa"),f=t("crel"),p="textbox";t("doc-js")}c=u.createSpec(c,u.View),c.prototype.type=p,c.prototype.render=function(){{var t=f("input");(this.updateEventName||"change").split(" ")}this._removeHandlers.push(this.gaffa.events.on(this.updateEventName||"change",t,n)),this.renderedElement=t},c.prototype.value=new u.Property(r),c.prototype.subType=new u.Property(o),c.prototype.placeholder=new u.Property(i),c.prototype.disabled=new u.Property(a),c.prototype.required=new u.Property(s),e.exports=c},{crel:32,"doc-js":34,gaffa:31}],64:[function(t,e){e.exports=function(t){t.scope.url=function(){return window.location.toString()},t.scope.url.hostname=function(){return window.location.hostname.toString()},t.scope.url.pathname=function(){return window.location.pathname.toString()},t.scope.url.query=function(){for(var t,e=window.location.search.slice(1).split("&"),n={},r=0;r<e.length;r++)t=e[0].split("="),n[t[0]]=t[1];return n},t.scope.url.hash=function(){return window.location.hash.split("#").pop()}}},{}],65:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,s=new Array(o-1),c=1;o>c;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(i(n)){for(o=arguments.length,s=new Array(o-1),c=1;o>c;c++)s[c-1]=arguments[c];for(u=n.slice(),o=u.length,c=0;o>c;c++)u[c].apply(this,s)}return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned){var o;o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],66:[function(t,e,n){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};!function(t){function o(t){throw RangeError(I[t])}function i(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function a(t,e){return i(t.split(C),e).join(".")}function s(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function c(t){return i(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(t>>>10&1023|55296),t=56320|1023&t),e+=M(t)}).join("")}function u(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:_}function f(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?D(t/T):t>>1,t+=D(t/e);t>L*A>>1;r+=_)t=D(t/L);return D(r+(L+1)*t/(t+j))}function l(t){var e,n,r,i,a,s,f,l,h,d,v=[],g=t.length,y=0,m=N,w=k;for(n=t.lastIndexOf(O),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&o("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;g>i;){for(a=y,s=1,f=_;i>=g&&o("invalid-input"),l=u(t.charCodeAt(i++)),(l>=_||l>D((x-y)/s))&&o("overflow"),y+=l*s,h=w>=f?P:f>=w+A?A:f-w,!(h>l);f+=_)d=_-h,s>D(x/d)&&o("overflow"),s*=d;e=v.length+1,w=p(y-a,e,0==a),D(y/e)>x-m&&o("overflow"),m+=D(y/e),y%=e,v.splice(y++,0,m)}return c(v)}function h(t){var e,n,r,i,a,c,u,l,h,d,v,g,y,m,w,b=[];for(t=s(t),g=t.length,e=N,n=0,a=k,c=0;g>c;++c)v=t[c],128>v&&b.push(M(v));for(r=i=b.length,i&&b.push(O);g>r;){for(u=x,c=0;g>c;++c)v=t[c],v>=e&&u>v&&(u=v);for(y=r+1,u-e>D((x-n)/y)&&o("overflow"),n+=(u-e)*y,e=u,c=0;g>c;++c)if(v=t[c],e>v&&++n>x&&o("overflow"),v==e){for(l=n,h=_;d=a>=h?P:h>=a+A?A:h-a,!(d>l);h+=_)w=l-d,m=_-d,b.push(M(f(d+w%m,0))),l=D(w/m);b.push(M(f(l,0))),a=p(n,y,r==i),n=0,++r}++n,++e}return b.join("")}function d(t){return a(t,function(t){return E.test(t)?l(t.slice(4).toLowerCase()):t})}function v(t){return a(t,function(t){return S.test(t)?"xn--"+h(t):t})}var g="object"==typeof n&&n,y="object"==typeof e&&e&&e.exports==g&&e,m="object"==typeof r&&r;(m.global===m||m.window===m)&&(t=m);var w,b,x=2147483647,_=36,P=1,A=26,j=38,T=700,k=72,N=128,O="-",E=/^xn--/,S=/[^ -~]/,C=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=_-P,D=Math.floor,M=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:s,encode:c},decode:l,encode:h,toASCII:v,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return w});else if(g&&!g.nodeType)if(y)y.exports=w;else for(b in w)w.hasOwnProperty(b)&&(g[b]=w[b]);else t.punycode=w}(this)},{}],67:[function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,o,i){e=e||"&",o=o||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var f=0;u>f;++f){var p,l,h,d,v=t[f].replace(s,"%20"),g=v.indexOf(o);g>=0?(p=v.substr(0,g),l=v.substr(g+1)):(p=v,l=""),h=decodeURIComponent(p),d=decodeURIComponent(l),n(a,h)?r(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],68:[function(t,e){"use strict";function n(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,a,s){return e=e||"&",a=a||"=",null===t&&(t=void 0),"object"==typeof t?n(i(t),function(n){var i=encodeURIComponent(r(n))+a;return o(t[n])?t[n].map(function(t){return i+encodeURIComponent(r(t))}).join(e):i+encodeURIComponent(r(t[n]))}).join(e):s?encodeURIComponent(r(s))+a+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],69:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":67,"./encode":68}],70:[function(t,e,n){!function(){"use strict";function e(t,e,n){if(t&&"object"==typeof t&&t.href)return t;if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o={},i=t;i=i.trim();var u=c.exec(i);if(u){u=u[0];var f=u.toLowerCase();o.protocol=f,i=i.substr(u.length)}if(n||u||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===i.substr(0,2);!p||u&&w[u]||(i=i.substr(2),o.slashes=!0)}if(!w[u]&&(p||u&&!b[u])){var _=i.indexOf("@");if(-1!==_){for(var P=i.slice(0,_),A=!0,j=0,T=d.length;T>j;j++)if(-1!==P.indexOf(d[j])){A=!1;break}A&&(o.auth=decodeURIComponent(P),i=i.substr(_+1))}for(var k=-1,j=0,T=h.length;T>j;j++){var N=i.indexOf(h[j]);-1!==N&&(0>k||k>N)&&(k=N)}-1!==k?(o.host=i.substr(0,k),i=i.substr(k)):(o.host=i,i="");for(var O=a(o.host),E=Object.keys(O),j=0,T=E.length;T>j;j++){var S=E[j];o[S]=O[S]}o.hostname=o.hostname||"";var C="["===o.hostname[0]&&"]"===o.hostname[o.hostname.length-1];if(o.hostname.length>v)o.hostname="";else if(!C)for(var I=o.hostname.split(/\./),j=0,T=I.length;T>j;j++){var L=I[j];if(L&&!L.match(g)){for(var D="",M=0,R=L.length;R>M;M++)D+=L.charCodeAt(M)>127?"x":L[M];if(!D.match(g)){var q=I.slice(0,j),V=I.slice(j+1),F=L.match(y);F&&(q.push(F[1]),V.unshift(F[2])),V.length&&(i="/"+V.join(".")+i),o.hostname=q.join(".");break}}}if(o.hostname=o.hostname.toLowerCase(),!C){for(var H=o.hostname.split("."),W=[],j=0;j<H.length;++j){var X=H[j];W.push(X.match(/[^A-Za-z0-9_-]/)?"xn--"+s.encode(X):X)}o.hostname=W.join(".")}o.host=(o.hostname||"")+(o.port?":"+o.port:""),o.href+=o.host,C&&(o.hostname=o.hostname.substr(1,o.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!m[f])for(var j=0,T=l.length;T>j;j++){var J=l[j],B=encodeURIComponent(J);
B===J&&(B=escape(J)),i=i.split(J).join(B)}var U=i.indexOf("#");-1!==U&&(o.hash=i.substr(U),i=i.slice(0,U));var $=i.indexOf("?");return-1!==$?(o.search=i.substr($),o.query=i.substr($+1),e&&(o.query=x.parse(o.query)),i=i.slice(0,$)):e&&(o.search="",o.query={}),i&&(o.pathname=i),b[u]&&o.hostname&&!o.pathname&&(o.pathname="/"),(o.pathname||o.search)&&(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=r(o),o}function r(t){"string"==typeof t&&(t=e(t));var n=t.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var r=t.protocol||"",o=t.pathname||"",i=t.hash||"",a=!1,s="";void 0!==t.host?a=n+t.host:void 0!==t.hostname&&(a=n+(-1===t.hostname.indexOf(":")?t.hostname:"["+t.hostname+"]"),t.port&&(a+=":"+t.port)),t.query&&"object"==typeof t.query&&Object.keys(t.query).length&&(s=x.stringify(t.query));var c=t.search||s&&"?"+s||"";return r&&":"!==r.substr(-1)&&(r+=":"),t.slashes||(!r||b[r])&&a!==!1?(a="//"+(a||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),c&&"?"!==c.charAt(0)&&(c="?"+c),r+a+o+c+i}function o(t,e){return r(i(t,e))}function i(t,n){if(!t)return n;if(t=e(r(t),!1,!0),n=e(r(n),!1,!0),t.hash=n.hash,""===n.href)return t.href=r(t),t;if(n.slashes&&!n.protocol)return n.protocol=t.protocol,b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=r(n),n;if(n.protocol&&n.protocol!==t.protocol){if(!b[n.protocol])return n.href=r(n),n;if(t.protocol=n.protocol,!n.host&&!w[n.protocol]){for(var o=(n.pathname||"").split("/");o.length&&!(n.host=o.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}return t.pathname=n.pathname,t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,(void 0!==t.pathname||void 0!==t.search)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.slashes=t.slashes||n.slashes,t.href=r(t),t}var i=t.pathname&&"/"===t.pathname.charAt(0),a=void 0!==n.host||n.pathname&&"/"===n.pathname.charAt(0),s=a||i||t.host&&n.pathname,c=s,u=t.pathname&&t.pathname.split("/")||[],o=n.pathname&&n.pathname.split("/")||[],f=t.protocol&&!b[t.protocol];if(f&&(delete t.hostname,delete t.port,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),delete t.host,n.protocol&&(delete n.hostname,delete n.port,n.host&&(""===o[0]?o[0]=n.host:o.unshift(n.host)),delete n.host),s=s&&(""===o[0]||""===u[0])),a)t.host=n.host||""===n.host?n.host:t.host,t.hostname=n.hostname||""===n.hostname?n.hostname:t.hostname,t.search=n.search,t.query=n.query,u=o;else if(o.length)u||(u=[]),u.pop(),u=u.concat(o),t.search=n.search,t.query=n.query;else if("search"in n){if(f){t.hostname=t.host=u.shift();var p=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;p&&(t.auth=p.shift(),t.host=t.hostname=p.shift())}return t.search=n.search,t.query=n.query,(void 0!==t.pathname||void 0!==t.search)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=r(t),t}if(!u.length)return delete t.pathname,t.search?delete t.path:t.path="/"+t.search,t.href=r(t),t;for(var l=u.slice(-1)[0],h=(t.host||n.host)&&("."===l||".."===l)||""===l,d=0,v=u.length;v>=0;v--)l=u[v],"."==l?u.splice(v,1):".."===l?(u.splice(v,1),d++):d&&(u.splice(v,1),d--);if(!s&&!c)for(;d--;d)u.unshift("..");!s||""===u[0]||u[0]&&"/"===u[0].charAt(0)||u.unshift(""),h&&"/"!==u.join("/").substr(-1)&&u.push("");var g=""===u[0]||u[0]&&"/"===u[0].charAt(0);if(f){t.hostname=t.host=g?"":u.length?u.shift():"";var p=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;p&&(t.auth=p.shift(),t.host=t.hostname=p.shift())}return s=s||t.host&&u.length,s&&!g&&u.unshift(""),t.pathname=u.join("/"),(void 0!==t.pathname||void 0!==t.search)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=r(t),t}function a(t){var e={},n=u.exec(t);return n&&(n=n[0],":"!==n&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t),e}var s=t("punycode");n.parse=e,n.resolve=o,n.resolveObject=i,n.format=r;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=["<",">",'"',"`"," ","\r","\n","	"],p=["{","}","|","\\","^","~","`"].concat(f),l=["'"].concat(f),h=["%","/","?",";","#"].concat(p).concat(l),d=["/","@","?","#"].concat(f),v=255,g=/^[a-zA-Z0-9][a-z0-9A-Z_-]{0,62}$/,y=/^([a-zA-Z0-9][a-z0-9A-Z_-]{0,62})(.*)$/,m={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=t("querystring")}()},{punycode:66,querystring:69}],71:[function(t,e){function n(){this._elements=[]}function r(){var t=window.scrollX,e=window.scrollY;return void 0===t&&(t=document.body.scrollLeft,e=document.body.scrollTop),document.elementFromPoint(this.pageX-window.scrollX,this.pageY-window.scrollY)}function o(t,e,n,r){var o=Math.abs(t-n),i=Math.abs(e-r);return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}function i(t){for(var e=0;e<v.length;e++)v[e].identifier===t.identifier&&v.splice(e,1)}function a(t){for(var e=0;e<v.length;e++)if(v[e].identifier===t)return v[e]}function s(t,e){for(var n=0;n<m.length;n++)t[m[n]]=e[m[n]]}function c(t,e){t||(t={}),e||(e=t);var n=a(e.identifier);n&&n.destroy(),this.identifier=e.identifier,this.moves=[],v.push(this)}function u(t){for(var e,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n],new c(t,t.changedTouches[n]).start(t,e)}function f(t){for(var e,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n],a(e.identifier).drag(t,e)}function p(t){for(var e,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n],a(e.identifier).end(t,e).destroy()}function l(t){for(var e,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n],a(e.identifier).cancel(t,e).destroy()}function h(t,e,n){t.addEventListener?t.addEventListener(e,n):document.attachEvent&&t.attachEvent("on"+e,n)}var d,v=[],g=5,y=1e3,m="target,pageX,pageY,clientX,clientY,offsetX,offsetY,screenX,screenY,shiftKey,x,y".split(",");n.prototype.on=function(t,e,n){return e?(e._interactEvents=e._interactEvents||{},e._interactEvents[t]=e._interactEvents[t]||[],e._interactEvents[t].push({callback:n,interact:this}),this):void 0},n.prototype.emit=function(t,e,n,r){if(e){var o=this,i=e;for(r.originalEvent=n,r.preventDefault=function(){n.preventDefault()},r.stopPropagation=function(){n.stopPropagation()};i;)i._interactEvents&&i._interactEvents[t]&&i._interactEvents[t].forEach(function(t){t.interact===o&&t.callback.call(r,r)}),i=i.parentNode;return this}},n.prototype.off=n.prototype.removeListener=function(t,e,n){if(e&&e._interactEvents&&e._interactEvents[t]){for(var r,o=e._interactEvents[t],i=0;i<o.length;i++)r=o[i],r.interact===d&&r.callback===n&&(o.splice(i,1),i--);return this}},d=new n,c.prototype={constructor:c,getActualTarget:r,destroy:function(){d.on("destroy",this.target,this,this),i(this)},start:function(t,e){e||(e=t);var n={time:new Date};return s(n,e),this.lastStart=n,s(this,e),d.emit("start",t.target,t,this),this},move:function(t,e){e||(e=t);var n={time:new Date};s(n,e),s(this,e),this.moves.push(n),this.moves=this.moves.slice(-y);var r=this.moves[this.moves.length-2];return r&&(n.angle=180*Math.atan2(n.pageY-r.pageY,n.pageX-r.pageX)/Math.PI),this.angle=n.angle||0,d.emit("move",t.target,t,this),this},drag:function(t,e){e||(e=t);var n={time:new Date,isDrag:!0};s(n,e),s(this,e),this.moves||(this.moves=[]),this.moves.push(n),this.moves=this.moves.slice(-y),!this.dragStarted&&o(this.lastStart.pageX,this.lastStart.pageY,n.pageX,n.pageY)>g&&(this.dragStarted=!0);var r=this.moves[this.moves.length-2]||this.lastStart;return r&&(n.angle=180*Math.atan2(n.pageY-r.pageY,n.pageX-r.pageX)/Math.PI),this.angle=n.angle||0,this.dragStarted&&d.emit("drag",t.target,t,this),this},end:function(t,e){return e||(e=t),s(this,e),d.emit("end",t.target,t,this),this},cancel:function(t,e){return e||(e=t),s(this,e),d.emit("cancel",t.target,t,this),this},getMoveDistance:function(){if(this.moves.length>1){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2];return o(t.pageX,t.pageY,e.pageX,e.pageY)}},getMoveDelta:function(){if(this.moves.length>1){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2];return{x:t.pageX-e.pageX,y:t.pageY-e.pageY}}},getSpeed:function(){if(this.moves.length>1){var t=this.moves[this.moves.length-1],e=this.moves[this.moves.length-2];return this.getMoveDistance()/(t.time-e.time)}return 0},getCurrentAngle:function(t){var e,n,r,o,i=this.moves.length-1,a=20/(2*this.getSpeed()+1),s=0;if(this.moves&&this.moves.length&&(e=this.moves[i],r=o=e.angle,t&&this.moves.length>1)){for(;--i>0&&this.moves.length-i<a;)n=this.moves[i].angle,Math.abs(n-o)>180?r-=n:r+=n,s++;r/=s}return r},getAllInteractions:function(){return v.slice()}},h(document,"touchstart",u),h(document,"touchmove",f),h(document,"touchend",p),h(document,"touchcancel",l);var w=!1;h(document,"mousedown",function(t){w=!0,v.length||new c(t),a().start(t)}),h(document,"mousemove",function(t){v.length||new c(t);var e=a();e&&(w?e.drag(t):e.move(t))}),h(document,"mouseup",function(t){w=!1;var e=a();e&&e.end(t,null)}),e.exports=d},{}],72:[function(t,e){function n(t,e){return t.replace(/{(\d+)}/g,function(t,n){return void 0==e[n]||null==e[n]?t:e[n]})}function r(t,e){return e.match(s)?e:t+e}function o(t){this.basePath=window.location.protocol+"//"+window.location.host,this.routes=t,this.homeRoute="home"}function i(t,e){var n;for(var r in t)if("_url"!==r){if(n=i(t[r],e),null!=n)return n;if(n=e(t[r],r),null!=n)return n}}var a=[],s=/^.+?\:\/\//g,c=/\{[0-9]*?\}/g;o.prototype.find=function(t){var e=this;return null==t&&(t=window.location.href),i(this.routes,function(n,r){for(var o=Array.isArray(n._url)?n._url:[n._url],i=0;i<o.length;i++){var a=e.resolve(e.basePath,o[i]);if(t.match("^"+a.replace(c,".*?")+"$"))return r}})},o.prototype.upOneName=function(t){return t?i(this.routes,function(e,n){return t in e?n:void 0})||this.homeRoute:void 0},o.prototype.upOne=function(t){return void 0===t&&(t=window.location.href),this.drill(t,this.upOneName(this.find(t)))},o.prototype.get=function(t){var e=i(this.routes,function(e,n){return t===n?Array.isArray(e._url)?e._url[0]:e._url:void 0});if(e)return arguments.length>1?this.resolve(this.basePath,n(e,a.slice.call(arguments,1))):this.resolve(this.basePath,e)},o.prototype.isIn=function(t,e){for(var n,r=t;r!==n&&r!==e;)n=r,r=this.upOneName(r);return r===e},o.prototype.isRoot=function(t){return t in this.routes},o.prototype.values=function(t){var e,n=this.get(this.find(t));if(null!=n)return e=t.match("^"+n.replace(c,"(.*?)")+"$"),e?e.slice(1):void 0},o.prototype.drill=function(t,e){null==t&&(t=window.location.href);var n=a.slice.call(arguments,2),r=this.values(t)||[];return r=r.concat(n),r.unshift(e),this.get.apply(this,r)},o.prototype.resolve=r,e.exports=o},{}],73:[function(t,e){function n(t){return String.fromCharCode(t)}function r(t){if(t+57345>65535)throw"Too many references. Log an issue on gihub an i'll add an order of magnatude to the keys.";return n(t+57345)}e.exports=r},{}],74:[function(t,e){function n(t,e){return r(JSON.parse(t,e))}var r=t("./revive");e.exports=n},{"./revive":75}],75:[function(t,e){function n(t){function e(t){var i=t;if("object"!=typeof i)return i;i=t instanceof Array?[]:{},t[o]&&(n[t[o]]=i);for(var a in t){var s=t[a];a!==o&&(null!=s&&"object"==typeof s?r.indexOf(s)<0&&(r.push(s),i[a]=e(s)):i[a]="string"==typeof s&&1===s.length&&s.charCodeAt(0)>o.charCodeAt(0)?n[s]:t[a])}return i}var n={},r=[];return e(t)}var r=t("./createKey"),o=r(-1);e.exports=n},{"./createKey":73}],76:[function(t,e){e.exports={stringify:t("./stringify"),parse:t("./parse"),revive:t("./revive")}},{"./parse":74,"./revive":75,"./stringify":77}],77:[function(t,e){function n(t){if(null!=t&&"object"==typeof t){var e=t instanceof Array?[]:{},n=t;"toJSON"in t&&(n=t.toJSON());for(var r in n)e[r]=n[r];return e}return t}function r(t,e,r){function a(t){if(null===t||"object"!=typeof t)return t;var e,r=s.indexOf(t);if(r>=0)return c[r][i]=u[r],u[r];r=s.length,s[r]=t,e=n(t),c[r]=e,u[r]=o(r);for(var f in e)e[f]=a(e[f]);return e}var s=[],c=[],u=[];return JSON.stringify(a(t),e,r)}var o=t("./createKey"),i=o(-1);e.exports=r},{"./createKey":73}],78:[function(t,e){function n(t,e){var o=document.body.style;if(!e&&r[t])return r[t];e=e||o;var i=[];for(var a in e)i.push(a);if(t in e)return t;for(var s=new RegExp("^("+n.prefixes.join("|")+")"+t+"$","i"),c=0;c<i.length;c++)if(i[c].match(s))return e===o&&(r[t]=i[c]),i[c]}var r={};n.prefixes=["webkit","moz","ms","o"],e.exports=n},{}],79:[function(t,e){e.exports={navigate:t("gaffa/actions/navigate"),set:t("gaffa/actions/set"),push:t("gaffa/actions/push"),concat:t("gaffa/actions/concat"),remove:t("gaffa/actions/remove"),generic:t("gaffa/actions/generic"),forEach:t("gaffa/actions/forEach"),toggle:t("gaffa/actions/toggle"),delay:t("gaffa/actions/delay"),conditional:t("gaffa/actions/conditional"),"switch":t("gaffa/actions/switch"),clean:t("gaffa/actions/clean"),back:t("./gaffaExtensions/actions/back"),ajax:t("gaffa-ajax")}},{"./gaffaExtensions/actions/back":89,"gaffa-ajax":14,"gaffa/actions/clean":15,"gaffa/actions/concat":16,"gaffa/actions/conditional":17,"gaffa/actions/delay":18,"gaffa/actions/forEach":19,"gaffa/actions/generic":20,"gaffa/actions/navigate":21,"gaffa/actions/push":22,"gaffa/actions/remove":23,"gaffa/actions/set":24,"gaffa/actions/switch":25,"gaffa/actions/toggle":26}],80:[function(t,e){t("url");e.exports=function(t){var e=t.ajax;t.ajax=function(n){var r=n.error,o=window.location.toString();return n.error=function(e){if(401===e.target.status){var n=JSON.parse(e.target.response);if(n.redirect)return n.message&&(t.model.set("[redirectMessage]",n.message),t.model.set("[targetUrl]",o)),void t.navigate(n.redirect)}if(422===e.target.status)var n=JSON.parse(e.target.response);r&&r.apply(this,arguments)},e(n)}}},{url:70}],81:[function(t,e){{var n={},r=t("gaffa"),o=new r;o.views.constructors=n.views=t("./views"),o.actions.constructors=n.actions=t("./actions"),o.behaviours.constructors=n.behaviours=t("./behaviours")}n.gaffa=o,e.exports=n},{"./actions":79,"./behaviours":82,"./views":94,gaffa:31}],82:[function(t,e){e.exports={pageLoad:t("gaffa/behaviours/pageLoad"),modelChange:t("gaffa/behaviours/modelChange"),navigate:t("gaffa/behaviours/navigate"),notification:t("gaffa/behaviours/notification")}},{"gaffa/behaviours/modelChange":27,"gaffa/behaviours/navigate":28,"gaffa/behaviours/notification":29,"gaffa/behaviours/pageLoad":30}],83:[function(t,e){function n(t){t.gaffa.navigate(window.location.href,"appBody.content")}e.exports=n},{}],84:[function(t,e){e.exports=function(t){function e(){var t=new n.container;return t.classes.value="appBody",t.name="appBody",t}{var n=t.views;t.actions,t.behaviours}return e()}},{}],85:[function(t,e){e.exports=function(e){function n(){var n=new r.container;return n.views.content.add([t("./header")(e),t("../controls/mainMenu")(e),t("./appBody")(e)]),n}{var r=e.views;e.actions,e.behaviours}return n()}},{"../controls/mainMenu":87,"./appBody":84,"./header":86}],86:[function(t,e){e.exports=function(t){function e(){var t=new n.container,e=new n.container,o=new n.container,i=new r.conditional,a=new r.navigate,s=new r.toggle,c=new n.image,u=new n.heading;return u.text.value="My awesome app",c.source.value="/images/logo.png",t.classes.value="header",o.classes.binding='(join " " "contextRegion" (? (== [currentPage] "home") "menu" "back"))',i.condition.binding='(== [currentPage] "home")',i.actions["true"]=[s],i.actions["false"]=[a],a.url.binding="(router.upOne)",s.target.binding="[showMainMenu]",e.classes.value="actionRegion",e.views.content.add([o,c,u]),e.actions.click=[i],t.views.content.add([e]),t}{var n=t.views,r=t.actions;t.behaviours}return e()}},{}],87:[function(t,e){e.exports=function(t){function e(t,e){var n=new o[e?"anchor":"button"]({text:t}),r=new i.set;return r.source.value=!1,r.target.binding="[showMainMenu]",n.actions.click=[r],n.classes.value="menuItem",e&&(n.href.binding=e.binding,n.href.value=e.value),n}function n(t,n){var r=e(t,{binding:'(router.get "'+n+'")'});return r.classes.binding='(join " " "menuItem" (? (router.isIn [currentPage] "'+n+'") "current" ""))',r}function r(){var t=new o.showable;return t.show.binding="[showMainMenu]",t.views.content.add([n({value:"Something"},"something")]),t}{var o=t.views,i=t.actions;t.behaviours}return r()}},{}],88:[function(t){var e=(t("gaffa"),t("./app")),n=t("./bootstrapper"),r=e.gaffa,o=t("./router"),i=t("./navigate")(r,o);window.gaffa=e.gaffa,e.router=o,t("./gelExtensions")(e),t("./ajax")(e.gaffa),r.navigate=i,r.notifications.add("navigation",function(){r.model.set("[currentPage]",o.find())}),window.onpopstate=function(t){t.state&&r.navigate(window.location.toString(),t.state.target,!1)},window.addEventListener("load",function(){r.model.set("[windowLoaded]",!0),r.views.add([t("./controls/appWrapper")(e)]),n(e)})},{"./ajax":80,"./app":81,"./bootstrapper":83,"./controls/appWrapper":85,"./gelExtensions":91,"./navigate":92,"./router":93,gaffa:31}],89:[function(t,e){function n(){}var r=t("gaffa");n=r.createSpec(n,r.Action),n.prototype.type="back",n.prototype.trigger=function(){window.history.back()},e.exports=n},{gaffa:31}],90:[function(t,e){function n(){}{var r=t("gaffa"),o=t("flaps"),i=t("crel");t("venfix"),t("doc-js")}n=r.createSpec(n,r.ContainerView),n.prototype.type="showable",n.prototype.show=new r.Property({update:function(t,e){e?t.flap.open():t.flap.close()},value:!1}),n.delegateTarget="body",n.prototype.render=function(){function t(){window.innerWidth>=600?s.disable():s.enable()}var e,n,r=this,a=i("div",{"class":"showableWrapper"},e=i("div",{"class":"showable"}),n=i("div",{"class":"mask"})),s=new o(a);s.width=280,s.delegateTarget=this.delegateTarget,s.on("settle",function(){r.show.set("open"===s.state)}),s.on("move",function(){n.style.opacity=this.percentOpen()/100}),s.on("ready",function(){setTimeout(t,300)}),this.flap=s,this.views.content.element=e,this.renderedElement=a,window.addEventListener("resize",t)},e.exports=n},{crel:1,"doc-js":3,flaps:7,gaffa:31,venfix:78}],91:[function(t,e){e.exports=function(e){t("gel-url")(e.gaffa.gedi.gel),e.gaffa.gedi.gel.scope.router={get:function(t,n){return e.router.get.apply(e.router,n.all())},find:function(t,n){return e.router.find.apply(e.router,n.all())},upOne:function(t,n){return e.router.upOne.apply(e.router,n.all())},isIn:function(t,n){return e.router.isIn.apply(e.router,n.all())},values:function(t,n){return e.router.values.apply(e.router,n.all())},drill:function(t,n){return e.router.drill.apply(e.router,n.all())},to:function(t,n){var r=n.all();return r.unshift(null),e.router.drill.apply(e.router,r)}}}},{"gel-url":64}],92:[function(t,e){var n=t("url"),r=t("statham");e.exports=function(t,e){function o(e,n){var r=t.views;if(n){var o=n.split("."),i=o[0],a=o[1];r=t.namedViews[i].views[a]}if(e.views&&r.empty(),e.model&&(gedi.set({}),t.model.set(e.model,null,null,!1)),e.views){for(var s=0;s<e.views.length;s++)e.views[s]=t.initialiseViewItem(e.views[s],t,t.views.constructors);r.add(e.views)}if(e.behaviours){for(var s=0;s<e.behaviours.length;s++)e.behaviours[s]=initialiseBehaviour(e.behaviours[s],t);t.behaviours.add(e.behaviours)}}function i(i,s,c,u){function f(e){var n;e.target=s,void 0!==e&&null!==e&&e.title&&(n=e.title),c!==!1&&t.pushState(e,n,i),a[i]=e,o(r.revive(a[i]),s),t.notifications.notify("navigation.success"),window.scrollTo(0,0)}function p(e){t.notifications.notify("navigation.error",e)}function l(){t.notifications.notify("navigation.complete")}return void 0===s&&(s="appBody.content"),t.notifications.notify("navigation.begin"),t.cacheNavigates!==!1&&a[i]?(f(r.revive(a[i])),void l()):void t.ajax({url:"build/pages/"+e.find(n.resolve(window.location.hostname,i))+".json",type:"get",data:u,dataType:"json",success:f,error:p,complete:l})}var a={};return i}},{statham:76,url:70}],93:[function(t,e){var n=t("route-tree");e.exports=new n({home:{_url:["/",""],something:{_url:"/#something"}}}),e.exports.basePath=window.location.href.split("/").slice(0,-1).join("/")},{"route-tree":72}],94:[function(t,e){e.exports={container:t("gaffa/views/container"),heading:t("gaffa/views/heading"),list:t("gaffa/views/list"),group:t("gaffa/views/group"),form:t("gaffa/views/form"),label:t("gaffa/views/label"),text:t("gaffa/views/text"),button:t("gaffa/views/button"),anchor:t("gaffa/views/anchor"),image:t("gaffa/views/image"),html:t("gaffa/views/html"),textbox:t("gaffa/views/textbox"),textarea:t("gaffa/views/textarea"),checkbox:t("gaffa/views/checkbox"),switchContainer:t("gaffa/views/switchContainer"),showable:t("./gaffaExtensions/views/showable")}},{"./gaffaExtensions/views/showable":90,"gaffa/views/anchor":49,"gaffa/views/button":50,"gaffa/views/checkbox":51,"gaffa/views/container":52,"gaffa/views/form":53,"gaffa/views/group":54,"gaffa/views/heading":55,"gaffa/views/html":56,"gaffa/views/image":57,"gaffa/views/label":58,"gaffa/views/list":59,"gaffa/views/switchContainer":60,"gaffa/views/text":61,"gaffa/views/textarea":62,"gaffa/views/textbox":63}]},{},[88]);